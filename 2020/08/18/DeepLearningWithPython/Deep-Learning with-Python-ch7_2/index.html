<!DOCTYPE html>
<html lang=zh>
<head><meta name="generator" content="Hexo 3.9.0">
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="Deep Learning with Python è¿™ç¯‡æ–‡ç« æ˜¯æˆ‘å­¦ä¹ ã€ŠDeep Learning with Pythonã€‹(ç¬¬äºŒç‰ˆï¼ŒFranÃ§ois Chollet è‘—) æ—¶å†™çš„ç³»åˆ—ç¬”è®°ä¹‹ä¸€ã€‚æ–‡ç« çš„å†…å®¹æ˜¯ä»  Jupyter notebooks è½¬æˆ Markdown çš„ï¼Œä½ å¯ä»¥å» GitHub æˆ– Gitee æ‰¾åˆ°åŸå§‹çš„ .ipynb ç¬”è®°æœ¬ã€‚ ä½ å¯ä»¥å»è¿™ä¸ªç½‘ç«™åœ¨çº¿é˜…è¯»è¿™æœ¬ä¹¦çš„æ­£ç‰ˆåŸæ–‡(è‹±æ–‡)">
<meta name="keywords" content="Machine Learning,Deep Learning">
<meta property="og:type" content="article">
<meta property="og:title" content="Pythonæ·±åº¦å­¦ä¹ ä¹‹Keraså›è°ƒå‡½æ•°ä¸TensorBoard">
<meta property="og:url" content="https://clownote.github.io/2020/08/18/DeepLearningWithPython/Deep-Learning with-Python-ch7_2/index.html">
<meta property="og:site_name" content="clownote">
<meta property="og:description" content="Deep Learning with Python è¿™ç¯‡æ–‡ç« æ˜¯æˆ‘å­¦ä¹ ã€ŠDeep Learning with Pythonã€‹(ç¬¬äºŒç‰ˆï¼ŒFranÃ§ois Chollet è‘—) æ—¶å†™çš„ç³»åˆ—ç¬”è®°ä¹‹ä¸€ã€‚æ–‡ç« çš„å†…å®¹æ˜¯ä»  Jupyter notebooks è½¬æˆ Markdown çš„ï¼Œä½ å¯ä»¥å» GitHub æˆ– Gitee æ‰¾åˆ°åŸå§‹çš„ .ipynb ç¬”è®°æœ¬ã€‚ ä½ å¯ä»¥å»è¿™ä¸ªç½‘ç«™åœ¨çº¿é˜…è¯»è¿™æœ¬ä¹¦çš„æ­£ç‰ˆåŸæ–‡(è‹±æ–‡)">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/007S8ZIlgy1ghp9tjfuzcj312g0d6acp.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/007S8ZIlgy1ghurzd5lj0j30fd0jzq4p.jpg">
<meta property="og:updated_time" content="2020-09-18T12:51:04.475Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Pythonæ·±åº¦å­¦ä¹ ä¹‹Keraså›è°ƒå‡½æ•°ä¸TensorBoard">
<meta name="twitter:description" content="Deep Learning with Python è¿™ç¯‡æ–‡ç« æ˜¯æˆ‘å­¦ä¹ ã€ŠDeep Learning with Pythonã€‹(ç¬¬äºŒç‰ˆï¼ŒFranÃ§ois Chollet è‘—) æ—¶å†™çš„ç³»åˆ—ç¬”è®°ä¹‹ä¸€ã€‚æ–‡ç« çš„å†…å®¹æ˜¯ä»  Jupyter notebooks è½¬æˆ Markdown çš„ï¼Œä½ å¯ä»¥å» GitHub æˆ– Gitee æ‰¾åˆ°åŸå§‹çš„ .ipynb ç¬”è®°æœ¬ã€‚ ä½ å¯ä»¥å»è¿™ä¸ªç½‘ç«™åœ¨çº¿é˜…è¯»è¿™æœ¬ä¹¦çš„æ­£ç‰ˆåŸæ–‡(è‹±æ–‡)">
<meta name="twitter:image" content="https://tva1.sinaimg.cn/large/007S8ZIlgy1ghp9tjfuzcj312g0d6acp.jpg">
    
    
        
          
              <link rel="shortcut icon" href="/images/rabbit.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/rabbit_192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/rabbit_180.png">
          
        
    
    <!-- title -->
    <title>Pythonæ·±åº¦å­¦ä¹ ä¹‹Keraså›è°ƒå‡½æ•°ä¸TensorBoard</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- persian styles -->
    
      <link rel="stylesheet" href="/css/rtl.css">
    
    <!-- rss -->
    
    
    <!--Google search varification (PRIVATE)-->
    <meta name="google-site-verification" content="MrqlpFAD8nDanw3Ypv7ZsIWHLnTdhRuLa4QhSVwxIvc">
    <!--Google AdSense å…³è” (PRIVATE)-->
    <script data-ad-client="ca-pub-1510963483941114" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
</head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">é¦–é¡µ</a></li>
         
          <li><a href="/about/">å…³äº</a></li>
         
          <li><a href="/archives/">å½’æ¡£</a></li>
         
          <li><a href="https://github.com/cdfmlr">é¡¹ç›®</a></li>
         
          <li><a href="/search/">æœç´¢</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2020/08/19/DeepLearningWithPython/Deep-Learning with-Python-ch7_3/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2020/08/17/DeepLearningWithPython/Deep-Learning with-Python-ch7_1/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">ä¸Šä¸€ç¯‡</span>
      <span id="i-next" class="info" style="display:none;">ä¸‹ä¸€ç¯‡</span>
      <span id="i-top" class="info" style="display:none;">è¿”å›é¡¶éƒ¨</span>
      <span id="i-share" class="info" style="display:none;">åˆ†äº«æ–‡ç« </span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://clownote.github.io/2020/08/18/DeepLearningWithPython/Deep-Learning with-Python-ch7_2/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://clownote.github.io/2020/08/18/DeepLearningWithPython/Deep-Learning with-Python-ch7_2/&text=Pythonæ·±åº¦å­¦ä¹ ä¹‹Keraså›è°ƒå‡½æ•°ä¸TensorBoard"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://clownote.github.io/2020/08/18/DeepLearningWithPython/Deep-Learning with-Python-ch7_2/&title=Pythonæ·±åº¦å­¦ä¹ ä¹‹Keraså›è°ƒå‡½æ•°ä¸TensorBoard"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://clownote.github.io/2020/08/18/DeepLearningWithPython/Deep-Learning with-Python-ch7_2/&is_video=false&description=Pythonæ·±åº¦å­¦ä¹ ä¹‹Keraså›è°ƒå‡½æ•°ä¸TensorBoard"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Pythonæ·±åº¦å­¦ä¹ ä¹‹Keraså›è°ƒå‡½æ•°ä¸TensorBoard&body=Check out this article: https://clownote.github.io/2020/08/18/DeepLearningWithPython/Deep-Learning with-Python-ch7_2/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://clownote.github.io/2020/08/18/DeepLearningWithPython/Deep-Learning with-Python-ch7_2/&title=Pythonæ·±åº¦å­¦ä¹ ä¹‹Keraså›è°ƒå‡½æ•°ä¸TensorBoard"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://clownote.github.io/2020/08/18/DeepLearningWithPython/Deep-Learning with-Python-ch7_2/&title=Pythonæ·±åº¦å­¦ä¹ ä¹‹Keraså›è°ƒå‡½æ•°ä¸TensorBoard"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://clownote.github.io/2020/08/18/DeepLearningWithPython/Deep-Learning with-Python-ch7_2/&title=Pythonæ·±åº¦å­¦ä¹ ä¹‹Keraså›è°ƒå‡½æ•°ä¸TensorBoard"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://clownote.github.io/2020/08/18/DeepLearningWithPython/Deep-Learning with-Python-ch7_2/&title=Pythonæ·±åº¦å­¦ä¹ ä¹‹Keraså›è°ƒå‡½æ•°ä¸TensorBoard"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://clownote.github.io/2020/08/18/DeepLearningWithPython/Deep-Learning with-Python-ch7_2/&name=Pythonæ·±åº¦å­¦ä¹ ä¹‹Keraså›è°ƒå‡½æ•°ä¸TensorBoard&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#deep-learning-with-python"><span class="toc-number">1.</span> <span class="toc-text"> Deep Learning with Python</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#72-inspecting-and-monitoring-deep-learning-models-using-keras-callbacks-and-tensorboard"><span class="toc-number">1.1.</span> <span class="toc-text"> 7.2 Inspecting and monitoring deep-learning models using Keras callbacks and TensorBoard</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#è®­ç»ƒä¸­å°†å›è°ƒå‡½æ•°ä½œç”¨äºæ¨¡å‹"><span class="toc-number">1.1.1.</span> <span class="toc-text"> è®­ç»ƒä¸­å°†å›è°ƒå‡½æ•°ä½œç”¨äºæ¨¡å‹</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ä½¿ç”¨-callback"><span class="toc-number">1.1.1.1.</span> <span class="toc-text"> ä½¿ç”¨ callback</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ç¼–å†™è‡ªå·±çš„å›è°ƒå‡½æ•°"><span class="toc-number">1.1.1.2.</span> <span class="toc-text"> ç¼–å†™è‡ªå·±çš„å›è°ƒå‡½æ•°</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tensorboard-ç®€ä»‹-tensorflow-çš„å¯è§†åŒ–æ¡†æ¶"><span class="toc-number">1.1.2.</span> <span class="toc-text"> TensorBoard ç®€ä»‹: TensorFlow çš„å¯è§†åŒ–æ¡†æ¶</span></a></li></ol></li></ol></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Pythonæ·±åº¦å­¦ä¹ ä¹‹Keraså›è°ƒå‡½æ•°ä¸TensorBoard
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">clownote</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2020-08-18T10:55:24.000Z" itemprop="datePublished">2020-08-18</time>
        
        (Updated: <time datetime="2020-09-18T12:51:04.475Z" itemprop="dateModified">2020-09-18</time>)
        
      
    </div>


      
    <div class="article-category">
        <i class="fas fa-archive"></i>
        <a class="category-link" href="/categories/Machine-Learning/">Machine Learning</a> â€º <a class="category-link" href="/categories/Machine-Learning/Deep-Learning-with-Python/">Deep Learning with Python</a>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/Deep-Learning/">Deep Learning</a>, <a class="tag-link" href="/tags/Machine-Learning/">Machine Learning</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h1 id="deep-learning-with-python"><a class="markdownIt-Anchor" href="#deep-learning-with-python"></a> Deep Learning with Python</h1>
<p>è¿™ç¯‡æ–‡ç« æ˜¯æˆ‘å­¦ä¹ ã€ŠDeep Learning with Pythonã€‹(ç¬¬äºŒç‰ˆï¼ŒFranÃ§ois Chollet è‘—) æ—¶å†™çš„ç³»åˆ—ç¬”è®°ä¹‹ä¸€ã€‚æ–‡ç« çš„å†…å®¹æ˜¯ä»  Jupyter notebooks è½¬æˆ Markdown çš„ï¼Œä½ å¯ä»¥å» <a href="https://github.com/cdfmlr/Deep-Learning-with-Python-Notebooks" target="_blank" rel="noopener">GitHub</a> æˆ– <a href="https://gitee.com/cdfmlr/Deep-Learning-with-Python-Notebooks" target="_blank" rel="noopener">Gitee</a> æ‰¾åˆ°åŸå§‹çš„ <code>.ipynb</code> ç¬”è®°æœ¬ã€‚</p>
<p>ä½ å¯ä»¥å»<a href="https://livebook.manning.com/book/deep-learning-with-python" target="_blank" rel="noopener">è¿™ä¸ªç½‘ç«™åœ¨çº¿é˜…è¯»è¿™æœ¬ä¹¦çš„æ­£ç‰ˆåŸæ–‡</a>(è‹±æ–‡)ã€‚è¿™æœ¬ä¹¦çš„ä½œè€…ä¹Ÿç»™å‡ºäº†é…å¥—çš„ <a href="https://github.com/fchollet/deep-learning-with-python-notebooks" target="_blank" rel="noopener">Jupyter notebooks</a>ã€‚</p>
<p>æœ¬æ–‡ä¸º <strong>ç¬¬7ç«   é«˜çº§çš„æ·±åº¦å­¦ä¹ æœ€ä½³å®è·µ</strong> (Chapter 7. <em>Advanced deep-learning best practices</em>) çš„ç¬”è®°ä¹‹ä¸€ã€‚</p>
<p>[TOC]</p>
<h2 id="72-inspecting-and-monitoring-deep-learning-models-using-keras-callbacks-and-tensorboard"><a class="markdownIt-Anchor" href="#72-inspecting-and-monitoring-deep-learning-models-using-keras-callbacks-and-tensorboard"></a> 7.2 Inspecting and monitoring deep-learning models using Keras callbacks and TensorBoard</h2>
<blockquote>
<p>ä½¿ç”¨ Keras å›è°ƒå‡½æ•°å’Œ TensorBoard æ¥æ£€æŸ¥å¹¶ç›‘æ§æ·±åº¦å­¦ä¹ æ¨¡å‹</p>
</blockquote>
<p>ç”¨ model.fit() å¼€å¯ä¸€ä¸ªå¤æ‚çš„è®­ç»ƒä»»åŠ¡åï¼Œæˆ‘ä»¬å°±åªèƒ½å¹²ç­‰ç€ï¼Œåœ¨ç»“æŸå‰éƒ½ä¸çŸ¥é“å®ƒæœ‰æ²¡æœ‰æ­£ç¡®å·¥ä½œï¼Œä¹Ÿæ— æ³•æ§åˆ¶å®ƒï¼Œå¥½ä¼¼æŠ›å‡ºäº†ä¸€æ¶çº¸é£æœºï¼Œä»»å®ƒéšé£å»å¾€ä¸ç¡®å®šçš„è¿œæ–¹ã€‚æ¯”èµ·è¿™æ ·ä¸å—æ§åˆ¶çš„çº¸é£æœºï¼Œæˆ–è®¸æˆ‘ä»¬æ›´å¸Œæœ›è¦ä¸€å°æ™ºèƒ½çš„æ— äººæœºï¼Œå¯ä»¥æ„ŸçŸ¥ç¯å¢ƒï¼Œå°†æ•°æ®å‘å›ç»™æˆ‘ä»¬ï¼Œå¹¶åŸºäºå½“å‰çŠ¶æ€è‡ªä¸»èˆªè¡Œã€‚ Keras çš„å›è°ƒå‡½æ•°ä¸ TensorBoard è¿™æ ·çš„å·¥å…·å°±å¯ä»¥å¸®æˆ‘ä»¬æŠŠâ€œçº¸é£æœºâ€æ”¹é€ æˆâ€œæ™ºèƒ½çš„æ— äººæœºâ€ã€‚</p>
<h3 id="è®­ç»ƒä¸­å°†å›è°ƒå‡½æ•°ä½œç”¨äºæ¨¡å‹"><a class="markdownIt-Anchor" href="#è®­ç»ƒä¸­å°†å›è°ƒå‡½æ•°ä½œç”¨äºæ¨¡å‹"></a> è®­ç»ƒä¸­å°†å›è°ƒå‡½æ•°ä½œç”¨äºæ¨¡å‹</h3>
<p>æˆ‘ä»¬åœ¨è®­ç»ƒæ¨¡å‹çš„æ—¶å€™ï¼Œä¸€å¼€å§‹æ˜¯ä¸çŸ¥é“è¦è·‘å¤šå°‘è½®çš„ï¼Œæˆ‘ä»¬åªèƒ½è®©å®ƒè·‘è¶³å¤Ÿå¤šçš„è½®æ¬¡ï¼Œç„¶åæ‰‹åŠ¨æ‰¾å‡ºä¸€ä¸ªæœ€ä½³çš„è½®æ¬¡æ•°ï¼Œé‡æ–°ç”¨è¿™ä¸ªæœ€ä½³è½®æ¬¡æ•°å»è®­ç»ƒæ¨¡å‹ï¼Œè¿™æ ·ç›¸å½“è€—æ—¶ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬æ›´å¸Œæœ›å½“æ¨¡å‹è§‚æµ‹åˆ°éªŒè¯æŸå¤±ä¸å†æ”¹å–„æ—¶å°±è‡ªåŠ¨åœæ­¢è®­ç»ƒã€‚</p>
<p>è¿™ç§æ“ä½œå°±å¯ä»¥ç”¨ Keras å›è°ƒå‡½æ•°ï¼ˆcallbackï¼‰å®Œæˆï¼šKeras æä¾›äº†å¾ˆå¤šæœ‰ç”¨çš„ callbackï¼Œæ”¾åœ¨ <code>keras.callbacks</code> é‡Œï¼Œè‡ªåŠ¨åœæ­¢è®­ç»ƒåªæ˜¯å…¶ä¸­ä¸€ç§ç”¨æ³•ã€‚</p>
<p>Callback ä¼šåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­çš„ä¸åŒæ—¶é—´ç‚¹è¢«æ¨¡å‹è°ƒç”¨ï¼Œå®ƒå¯ä»¥è®¿é—®æ¨¡å‹çš„çŠ¶æ€ï¼Œå¹¶å¯ä»¥é‡‡å–ä¸€äº›è¡ŒåŠ¨ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>æ¨¡å‹æ£€æŸ¥ç‚¹ï¼šåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­çš„ä¸åŒæ—¶é—´ç‚¹ä¿å­˜æ¨¡å‹çš„å½“å‰æƒé‡</li>
<li>æå‰ç»ˆæ­¢ï¼šéªŒè¯æŸå¤±ä¸å†æ”¹å–„æ—¶ä¸­æ–­è®­ç»ƒ</li>
<li>åŠ¨æ€è°ƒèŠ‚å‚æ•°å€¼ï¼šä¾‹å¦‚åŠ¨æ€è°ƒæ•´ä¼˜åŒ–å™¨çš„å­¦ä¹ ç‡</li>
<li>è®°å½•è®­ç»ƒæŒ‡æ ‡å’ŒéªŒè¯æŒ‡æ ‡ï¼šç”¨è¿™äº›æŒ‡æ ‡å°±å¯ä»¥å°†æ¨¡å‹å­¦åˆ°çš„è¡¨ç¤ºå¯è§†åŒ–</li>
<li>â€¦</li>
</ul>
<h4 id="ä½¿ç”¨-callback"><a class="markdownIt-Anchor" href="#ä½¿ç”¨-callback"></a> ä½¿ç”¨ callback</h4>
<p>Keras å†…ç½®äº†è®¸å¤šæœ‰ç”¨çš„ callbackï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li><code>ModelCheckpoint</code>ï¼šåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ä¿å­˜è®­ç»ƒåˆ°æŸäº›çŠ¶æ€çš„æ¨¡å‹ã€‚å¯ä»¥ç”¨æ¥æŒç»­ä¸æ–­åœ°ä¿å­˜æ¨¡å‹ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©æ€§åœ°ä¿å­˜ç›®å‰çš„æœ€ä½³æ¨¡å‹ï¼›</li>
<li><code>EarlyStopping</code>ï¼šç›‘æ§çš„ç›®æ ‡æŒ‡æ ‡ï¼Œå¦‚æœåœ¨è®¾å®šçš„è½®æ•°å†…ä¸å†æ”¹å–„ï¼Œåˆ™ä¸­æ–­è®­ç»ƒï¼›</li>
<li><code>ReduceLROnPlateau</code>ï¼šåœ¨éªŒè¯æŸå¤±ä¸å†æ”¹å–„æ—¶ï¼ˆé‡åˆ°loss plateauï¼‰ï¼Œé™ä½å­¦ä¹ ç‡ã€‚</li>
</ul>
<p>è¿™äº› callback çš„ä½¿ç”¨ä¹Ÿå¾ˆç®€å•ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> tensorflow <span class="keyword">import</span> keras</span><br><span class="line"></span><br><span class="line">callbacks_list = [</span><br><span class="line">    <span class="comment"># åœ¨æ¯è½®å®Œæˆåä¿å­˜æƒé‡</span></span><br><span class="line">    keras.callbacks.ModelCheckpoint(</span><br><span class="line">        filepath=<span class="string">'my_model.h5'</span>,  <span class="comment"># ä¿å­˜æ–‡ä»¶çš„è·¯å¾„</span></span><br><span class="line">        monitor=<span class="string">'val_loss'</span>,      <span class="comment"># monitorï¼šè¦éªŒè¯çš„æŒ‡æ ‡</span></span><br><span class="line">        save_best_only=<span class="literal">True</span>,     <span class="comment"># åªä¿å­˜è®© monitor æŒ‡æ ‡æœ€å¥½çš„æ¨¡å‹ï¼ˆå¦‚æœ monitor æ²¡æœ‰æ”¹å–„ï¼Œå°±ä¸ä¿å­˜ï¼‰</span></span><br><span class="line">    ),</span><br><span class="line">    <span class="comment"># ä¸å†æ”¹å–„æ—¶ä¸­æ–­è®­ç»ƒ</span></span><br><span class="line">    keras.callbacks.EarlyStopping(</span><br><span class="line">        monitor=<span class="string">'acc'</span>,           <span class="comment"># è¦éªŒè¯çš„æŒ‡æ ‡</span></span><br><span class="line">        patience=<span class="number">10</span>,             <span class="comment"># å¦‚æœ monitor åœ¨å¤šäº patience è½®å†…ï¼ˆæ¯”å¦‚è¿™é‡Œå°±æ˜¯10+1=11è½®ï¼‰æ²¡æœ‰æ”¹å–„ï¼Œåˆ™ä¸­æ–­è®­ç»ƒ</span></span><br><span class="line">    ),</span><br><span class="line">    <span class="comment"># ä¸å†æ”¹å–„æ—¶é™ä½å­¦ä¹ ç‡</span></span><br><span class="line">    keras.callbacks.ReduceLROnPlateau(</span><br><span class="line">        monitor=<span class="string">'val_loss'</span>,    <span class="comment"># è¦éªŒè¯çš„æŒ‡æ ‡</span></span><br><span class="line">        factor=<span class="number">0.1</span>,            <span class="comment"># è§¦å‘æ—¶ï¼šå­¦ä¹ ç‡ *= factor</span></span><br><span class="line">        patience=<span class="number">5</span>,            <span class="comment"># monitor åœ¨ patience è½®å†…æ²¡æœ‰æ”¹å–„ï¼Œåˆ™è§¦å‘é™ä½å­¦ä¹ ç‡</span></span><br><span class="line">    ),</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">model.compile(optimizer=<span class="string">'rmsprop'</span>, </span><br><span class="line">              loss=<span class="string">'binary_crossentropy'</span>, </span><br><span class="line">              metrics=[<span class="string">'acc'</span>])    <span class="comment"># åœ¨ callback é‡Œç”¨åˆ°äº† acc åšæŒ‡æ ‡ï¼Œæ‰€ä»¥è¿™é‡Œçš„ metrics é‡Œè¦æœ‰ acc</span></span><br><span class="line"></span><br><span class="line">model.fit(x, y, </span><br><span class="line">          epochs=<span class="number">10</span>, </span><br><span class="line">          batch_size=<span class="number">32</span>, </span><br><span class="line">          callbacks=callbacks_list,     <span class="comment"># è®­ç»ƒæ—¶ä½¿ç”¨è¿™äº›å›è°ƒ</span></span><br><span class="line">          validation_data=(x_val, y_val))  <span class="comment"># callback é‡Œç”¨åˆ°äº† valï¼Œæ‰€ä»¥è¿™é‡Œå¿…é¡»æœ‰ val</span></span><br></pre></td></tr></table></figure>
<h4 id="ç¼–å†™è‡ªå·±çš„å›è°ƒå‡½æ•°"><a class="markdownIt-Anchor" href="#ç¼–å†™è‡ªå·±çš„å›è°ƒå‡½æ•°"></a> ç¼–å†™è‡ªå·±çš„å›è°ƒå‡½æ•°</h4>
<p>é™¤äº†ä½¿ç”¨ Keras å†…ç½®çš„å›è°ƒï¼Œè¿˜å¯ä»¥è‡ªå·±å†™ callback æ¥å®Œæˆå†…ç½®æ²¡æœ‰çš„æ“ä½œã€‚</p>
<p>è‡ªå·±å†™å›è°ƒé€šè¿‡åˆ›å»º <code>keras.callbacks.Callback</code> çš„å­ç±»æ¥å®ç°ã€‚å’Œå†™æ¸¸æˆè„šæœ¬å¾ˆç±»ä¼¼ï¼Œåœ¨è¿™ä¸ªå­ç±»ä¸­å®ç°ä¸€äº›æ–¹æ³•ï¼Œç„¶åè¿™äº›æ–¹æ³•å°±ä¼šåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­çš„ç‰¹å®šæ—¶é—´ç‚¹è¢«è°ƒç”¨ï¼š</p>
<table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>è¢«è°ƒç”¨çš„æ—¶é—´</th>
</tr>
</thead>
<tbody>
<tr>
<td>on_epoch_begin</td>
<td>åœ¨æ¯è½®å¼€å§‹æ—¶è¢«è°ƒç”¨</td>
</tr>
<tr>
<td>on_epoch_end</td>
<td>åœ¨æ¯è½®ç»“æŸæ—¶è¢«è°ƒç”¨</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td>on_batch_begin</td>
<td>åœ¨å¤„ç†æ¯ä¸ªæ‰¹é‡ä¹‹å‰è¢«è°ƒç”¨</td>
</tr>
<tr>
<td>on_batch_end</td>
<td>åœ¨å¤„ç†æ¯ä¸ªæ‰¹é‡ä¹‹åè¢«è°ƒç”¨</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td>on_train_begin</td>
<td>åœ¨è®­ç»ƒå¼€å§‹æ—¶è¢«è°ƒç”¨</td>
</tr>
<tr>
<td>on_train_end</td>
<td>åœ¨è®­ç»ƒç»“æŸæ—¶è¢«è°ƒç”¨</td>
</tr>
</tbody>
</table>
<p>è¿™äº›æ–¹æ³•æ¥å—ä¸€ä¸ª logs å‚æ•°ï¼ˆdictç±»å‹çš„ï¼‰ï¼Œé‡Œé¢åŒ…å«å‰ä¸€ä¸ªepoch æˆ– batch æˆ– train çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬è®­ç»ƒæŒ‡æ ‡ã€éªŒè¯æŒ‡æ ‡ä¹‹ç±»çš„ã€‚</p>
<p>åœ¨è¿™äº›æ–¹æ³•ä¸­ï¼Œè¿˜å¯ä»¥è®¿é—®ï¼š</p>
<ul>
<li><code>self.model</code>: è°ƒç”¨å›è°ƒçš„æ¨¡å‹å®ä¾‹;</li>
<li><code>self.validation_data</code>: fit ä¼ å…¥çš„éªŒè¯æ•°æ®;</li>
</ul>
<p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬ç¼–å†™ä¸€ä¸ªè‡ªå®šä¹‰å›è°ƒå‡½æ•°ï¼Œåœ¨æ¯è½®ç»“æŸåå°†æ¨¡å‹æ¯å±‚å¯¹éªŒè¯é›†çš„ç¬¬ä¸€ä¸ªæ ·æœ¬çš„æ¿€æ´»è®¡ç®—å€¼ä¿å­˜ä¸‹æ¥ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> tensorflow <span class="keyword">import</span> keras</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ActivationLogger</span><span class="params">(keras.callbacks.Callback)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">set_model</span><span class="params">(self, model)</span>:</span>  <span class="comment"># åœ¨è®­ç»ƒä¹‹å‰ç”±çˆ¶æ¨¡å‹è°ƒç”¨ï¼Œå‘Šè¯‰å›è°ƒå‡½æ•°æ˜¯å“ªä¸ªæ¨¡å‹åœ¨è°ƒç”¨å®ƒ</span></span><br><span class="line">        self.model = model</span><br><span class="line">        layer_outputs = [layer.output <span class="keyword">for</span> layer <span class="keyword">in</span> model.layers]</span><br><span class="line">        self.activations_model = keras.models.Model(model.input, layer_outputs)  <span class="comment"># æ¨¡å‹å®ä¾‹ï¼Œè¿”å›æ¯å±‚çš„æ¿€æ´»</span></span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">on_epoch_end</span><span class="params">(self, epoch, logs=None)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> self.validation_data <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">raise</span> RuntimeError(<span class="string">'Requires validation_data.'</span>)</span><br><span class="line">        validation_sample = self.validation_data[<span class="number">0</span>][<span class="number">0</span>:<span class="number">1</span>]</span><br><span class="line">        activations = self.activations_model.predict(validation_sample)</span><br><span class="line">        <span class="keyword">with</span> open(<span class="string">f'activations_at_epoch_<span class="subst">&#123;epoch&#125;</span>.npz'</span>, <span class="string">'w'</span>) <span class="keyword">as</span> f:</span><br><span class="line">            np.savez(f, activations)</span><br></pre></td></tr></table></figure>
<h3 id="tensorboard-ç®€ä»‹-tensorflow-çš„å¯è§†åŒ–æ¡†æ¶"><a class="markdownIt-Anchor" href="#tensorboard-ç®€ä»‹-tensorflow-çš„å¯è§†åŒ–æ¡†æ¶"></a> TensorBoard ç®€ä»‹: TensorFlow çš„å¯è§†åŒ–æ¡†æ¶</h3>
<p>ä¸ºäº†åšå‡ºæ›´å¥½æ¨¡å‹ï¼Œé™¤äº†æ€è€ƒæ„æ¶ã€ç¼–å†™ä»£ç ï¼Œæˆ‘ä»¬è¿˜éœ€è¦è·å–å…³äºæ¨¡å‹çš„ä¿¡æ¯ã€äº†è§£è®­ç»ƒè¿‡ç¨‹ä¸­æ¨¡å‹å†…éƒ¨æ­£åœ¨å‘ç”Ÿä»€ä¹ˆï¼Œå¹¶ç”¨è¿™äº›ä¿¡æ¯æ¥çŸ¥é“æˆ‘ä»¬å†æ€è€ƒã€å†ä¼˜åŒ–æ¨¡å‹ã€‚</p>
<p>æ€è€ƒæ˜¯åœ¨ä½ çš„è„‘å­é‡Œå®Œæˆçš„ï¼Œç¼–å†™æ¨¡å‹çš„ä»£ç å¯ä»¥ç”¨ Keras API è½»æ¾å®ç°ï¼Œè€Œäº†è§£æ¨¡å‹å¯ä»¥å€Ÿç”¨ TensorBoardã€‚TensorBoard æ˜¯å†…ç½®äº TensorFlow ä¸­çš„åŸºäºæµè§ˆå™¨çš„å¯è§†åŒ–å·¥å…·ï¼Œå®ƒèƒ½åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­è®©ä½ å¯è§†åŒ–åœ°ç›‘æ§æ¨¡å‹å†…éƒ¨å‘ç”Ÿçš„ä¸€åˆ‡ã€‚</p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ghp9tjfuzcj312g0d6acp.jpg" alt="å–å¾—è¿›å±•çš„å¾ªç¯"></p>
<p>TensorBoard ä¸»è¦æœ‰ä¸€ä¸‹å‡ ä¸ªä½œç”¨ï¼š</p>
<ul>
<li>åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ä»¥å¯è§†åŒ–çš„æ–¹å¼ç›‘æ§æŒ‡æ ‡</li>
<li>å°†æ¨¡å‹æ¶æ„å¯è§†åŒ–</li>
<li>å°†æ¿€æ´»å’Œæ¢¯åº¦çš„ç›´æ–¹å›¾å¯è§†åŒ–</li>
<li>ä»¥ä¸‰ç»´çš„å½¢å¼ç ”ç©¶åµŒå…¥</li>
</ul>
<p>æˆ‘ä»¬åœ¨ IMDB æƒ…æ„Ÿåˆ†æä»»åŠ¡ä¸Šè®­ç»ƒä¸€ä¸ªä¸€ç»´å·ç§¯ç¥ç»ç½‘ç»œï¼Œæ¥æ¼”ç¤º TensorBoard çš„ä½¿ç”¨:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> tensorflow <span class="keyword">import</span> keras</span><br><span class="line"><span class="keyword">from</span> tensorflow.keras <span class="keyword">import</span> layers</span><br><span class="line"><span class="keyword">from</span> tensorflow.keras.datasets <span class="keyword">import</span> imdb</span><br><span class="line"><span class="keyword">from</span> tensorflow.keras.preprocessing <span class="keyword">import</span> sequence</span><br><span class="line"></span><br><span class="line">max_features = <span class="number">2000</span></span><br><span class="line">max_len = <span class="number">500</span></span><br><span class="line"></span><br><span class="line">(x_train, y_train), (x_test, y_test) = imdb.load_data(num_words=max_features)</span><br><span class="line">x_train = sequence.pad_sequences(x_train, maxlen=max_len)</span><br><span class="line">x_test = sequence.pad_sequences(x_test, maxlen=max_len)</span><br><span class="line"></span><br><span class="line">model = keras.models.Sequential()</span><br><span class="line">model.add(layers.Embedding(max_features, <span class="number">128</span>,</span><br><span class="line">                           input_length=max_len,</span><br><span class="line">                           name=<span class="string">'embed'</span>))</span><br><span class="line">model.add(layers.Conv1D(<span class="number">32</span>, <span class="number">7</span>, activation=<span class="string">'relu'</span>))</span><br><span class="line">model.add(layers.MaxPool1D(<span class="number">5</span>))</span><br><span class="line">model.add(layers.Conv1D(<span class="number">32</span>, <span class="number">7</span>, activation=<span class="string">'relu'</span>))</span><br><span class="line">model.add(layers.GlobalMaxPooling1D())</span><br><span class="line"></span><br><span class="line">model.add(layers.Dense(<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line">model.summary()</span><br><span class="line"></span><br><span class="line">model.compile(optimizer=<span class="string">'rmsprop'</span>,</span><br><span class="line">              loss=<span class="string">'binary_crossentropy'</span>,</span><br><span class="line">              metrics=[<span class="string">'acc'</span>])</span><br></pre></td></tr></table></figure>
<pre><code>Model: &quot;sequential&quot;
_________________________________________________________________
Layer (type)                 Output Shape              Param #   
=================================================================
embed (Embedding)            (None, 500, 128)          256000    
_________________________________________________________________
conv1d (Conv1D)              (None, 494, 32)           28704     
_________________________________________________________________
max_pooling1d (MaxPooling1D) (None, 98, 32)            0         
_________________________________________________________________
conv1d_1 (Conv1D)            (None, 92, 32)            7200      
_________________________________________________________________
global_max_pooling1d (Global (None, 32)                0         
_________________________________________________________________
dense (Dense)                (None, 1)                 33        
=================================================================
Total params: 291,937
Trainable params: 291,937
Non-trainable params: 0
_________________________________________________________________
</code></pre>
<p>è¦ä½¿ç”¨ TensorBoardï¼Œåœ¨å¼€å§‹è®­ç»ƒä¹‹å‰è¿˜éœ€è¦åšä¸€äº›å‡†å¤‡ã€‚é¦–å…ˆï¼Œä¸º TensorBoard éœ€è¦çš„æ—¥å¿—æ–‡ä»¶åˆ›å»ºä¸€ä¸ªç›®å½•ï¼Œå¹¶å¼€å¯ TensorBoard çš„æœåŠ¡ã€‚åœ¨ shell é‡Œï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> mkdir my_log_dir</span></span><br></pre></td></tr></table></figure>
<p>æˆ–è€…ï¼Œåœ¨ Jupyter Notebook ä¸­ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%mkdir my_log_dir</span><br></pre></td></tr></table></figure>
<p>ç„¶åï¼Œå®ä¾‹åŒ–ä¸€ä¸ª TensorBoard å›è°ƒå‡½æ•°ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"></span><br><span class="line">tensorboard_callback = tf.keras.callbacks.TensorBoard(</span><br><span class="line">    log_dir=<span class="string">'my_log_dir'</span>,  <span class="comment"># æ—¥å¿—æ–‡ä»¶çš„å‚¨å­˜ä½ç½®</span></span><br><span class="line">    histogram_freq=<span class="number">1</span>,      <span class="comment"># æ¯ histogram_freq è½®ä¹‹åè®°å½•æ¿€æ´»ç›´æ–¹å›¾</span></span><br><span class="line">    embeddings_freq=<span class="number">1</span>,     <span class="comment"># æ¯ histogram_freq è½®ä¹‹åè®°å½•è¯åµŒå…¥</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>æœ€åï¼Œåœ¨è®­ç»ƒæ—¶ä½¿ç”¨è¿™ä¸ªå›è°ƒå°±å¯ä»¥äº†ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">history = model.fit(x_train, y_train, </span><br><span class="line">                    epochs=<span class="number">20</span>, </span><br><span class="line">                    batch_size=<span class="number">128</span>, </span><br><span class="line">                    validation_split=<span class="number">0.2</span>, </span><br><span class="line">                    callbacks=[tensorboard_callback])</span><br></pre></td></tr></table></figure>
<pre><code>Epoch 1/20
157/157 [==============================] - 25s 156ms/step - loss: 0.6376 - acc: 0.6424 - val_loss: 0.7053 - val_acc: 0.7210
Epoch 2/20
157/157 [==============================] - 24s 152ms/step - loss: 0.4426 - acc: 0.8489 - val_loss: 0.5328 - val_acc: 0.8378
Epoch 3/20
157/157 [==============================] - 25s 161ms/step - loss: 0.3988 - acc: 0.8807 - val_loss: 0.4488 - val_acc: 0.8688
Epoch 4/20
157/157 [==============================] - 24s 155ms/step - loss: 0.3680 - acc: 0.8965 - val_loss: 0.5022 - val_acc: 0.8714
Epoch 5/20
157/157 [==============================] - 25s 162ms/step - loss: 0.3123 - acc: 0.9168 - val_loss: 0.4771 - val_acc: 0.8688
Epoch 6/20
157/157 [==============================] - 25s 162ms/step - loss: 0.2550 - acc: 0.9387 - val_loss: 0.7022 - val_acc: 0.8640
Epoch 7/20
157/157 [==============================] - 24s 156ms/step - loss: 0.2419 - acc: 0.9470 - val_loss: 0.7245 - val_acc: 0.8758
Epoch 8/20
157/157 [==============================] - 27s 170ms/step - loss: 0.1864 - acc: 0.9671 - val_loss: 0.8042 - val_acc: 0.8718
Epoch 9/20
157/157 [==============================] - 30s 189ms/step - loss: 0.1548 - acc: 0.9776 - val_loss: 0.9950 - val_acc: 0.8490
Epoch 10/20
157/157 [==============================] - 36s 228ms/step - loss: 0.1361 - acc: 0.9844 - val_loss: 0.8995 - val_acc: 0.8714
Epoch 11/20
157/157 [==============================] - 35s 220ms/step - loss: 0.1297 - acc: 0.9858 - val_loss: 0.9611 - val_acc: 0.8694
Epoch 12/20
157/157 [==============================] - 33s 210ms/step - loss: 0.1184 - acc: 0.9884 - val_loss: 1.0366 - val_acc: 0.8706
Epoch 13/20
157/157 [==============================] - 29s 187ms/step - loss: 0.1156 - acc: 0.9877 - val_loss: 1.0596 - val_acc: 0.8700
Epoch 14/20
157/157 [==============================] - 30s 191ms/step - loss: 0.1101 - acc: 0.9894 - val_loss: 1.1298 - val_acc: 0.8566
Epoch 15/20
157/157 [==============================] - 25s 162ms/step - loss: 0.1098 - acc: 0.9903 - val_loss: 1.1452 - val_acc: 0.8652
Epoch 16/20
157/157 [==============================] - 26s 166ms/step - loss: 0.1058 - acc: 0.9909 - val_loss: 1.1963 - val_acc: 0.8692
Epoch 17/20
157/157 [==============================] - 26s 165ms/step - loss: 0.1119 - acc: 0.9903 - val_loss: 1.2531 - val_acc: 0.8686
Epoch 18/20
157/157 [==============================] - 30s 190ms/step - loss: 0.1058 - acc: 0.9914 - val_loss: 1.2296 - val_acc: 0.8678
Epoch 19/20
157/157 [==============================] - 25s 161ms/step - loss: 0.1056 - acc: 0.9916 - val_loss: 1.2272 - val_acc: 0.8666
Epoch 20/20
157/157 [==============================] - 25s 160ms/step - loss: 0.1086 - acc: 0.9904 - val_loss: 1.2287 - val_acc: 0.8682
</code></pre>
<p>å¼€å§‹è®­ç»ƒä¹‹åï¼Œå°±å¯ä»¥å¼€å¯ TensorBoard æœåŠ¡ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> tensorboard --logdir=my_log_dir</span></span><br></pre></td></tr></table></figure>
<p>æˆ–è€…åœ¨ Jupyter Notebook é‡Œï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">%load_ext tensorboard</span><br><span class="line">%tensorboard --logdir=my_log_dir</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨å°±å¯ä»¥åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ <code>http://localhost:6006</code> æ¥æŸ¥çœ‹ TensorBoard çš„å¯è§†åŒ–æ¨¡å‹çš„è®­ç»ƒè¿‡ç¨‹äº†ã€‚</p>
<ul>
<li>Scalars æ ‡ç­¾é¡µä¸­ï¼Œå¯ä»¥çœ‹åˆ°è®­ç»ƒè¿‡ç¨‹ä¸­ç²¾åº¦ã€æŸå¤±çš„å˜åŒ–æ›²çº¿ï¼Œå’Œæˆ‘ä»¬ä¹‹å‰æ¯æ¬¡è®­ç»ƒå®Œä¹‹åç”¨ plt ç”»çš„æ˜¯åŒæ ·çš„å†…å®¹ï¼Œä¸è¿‡åœ¨  TensorBoard é‡Œä½ å¯ä»¥éšæ—¶åˆ·æ–°å»çœ‹ï¼Œä¸ç”¨ç­‰åˆ°è®­ç»ƒå®Œæˆï¼›</li>
<li>Graph æ ‡ç­¾é¡µä¸­ï¼Œæ˜¾ç¤ºçš„æ˜¯ Keras æ¨¡å‹èƒŒåçš„åº•å±‚ TensorFlow è¿ç®—å›¾çš„å¯è§†åŒ–ï¼Œè¿™ä¸ªåº•å±‚è¿ç®—å›¾æ¯”æˆ‘ä»¬çš„ Keras æ¨¡å‹å¤æ‚ï¼Œè¿™å°±æ˜¯ Keras ä¸ºæˆ‘ä»¬ç®€åŒ–çš„å·¥ä½œï¼ŒKeras è®©æˆ‘ä»¬ä¸å»æ¥è§¦é‚£äº›å¤æ‚çš„ä¸œè¥¿ï¼Œè®©å·¥ä½œæµç¨‹å˜å¾—éå¸¸ç®€å•ï¼›å¦‚æœä½ æƒ³çœ‹ Keras æ¨¡å‹æœ¬èº«çš„å›¾è¡¨ç¤ºï¼Œå¯ä»¥ç”¨ <code>keras.utils.plot_model</code>ï¼š</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"></span><br><span class="line">tf.keras.utils.plot_model(model, show_shapes=<span class="literal">True</span>, to_file=<span class="string">'model.png'</span>)</span><br><span class="line"><span class="comment"># show_shapes=True å¯ä»¥æŠŠå„å±‚çš„è¾“å…¥è¾“å‡ºå¼ é‡å½¢çŠ¶æ˜¾ç¤ºå‡ºæ¥</span></span><br></pre></td></tr></table></figure>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ghurzd5lj0j30fd0jzq4p.jpg" alt="png"></p>
<ul>
<li>Histograms æ ‡ç­¾é¡µä¸­ï¼Œæœ‰æ¯å±‚çš„æ¿€æ´»å€¼ç›´æ–¹å›¾ï¼›</li>
<li>Projector æ ‡ç­¾é¡µä¸­ï¼Œæœ‰æˆ‘ä»¬çš„è¯è¡¨ä¸­ 2000 ä¸ªå•è¯çš„è¯åµŒå…¥ç©ºé—´å…³ç³»ã€‚è¿™æ˜¯ç”± Embedding å±‚å­¦ä¹ åˆ°çš„ 128 ç»´çš„åµŒå…¥ç©ºé—´ç”¨ PCA ä¹‹ç±»çš„ç®—æ³•é™åˆ° 2 ç»´æˆ–è€… 3 ç»´åå¾—åˆ°çš„â€œæŠ•å½±â€å½±åƒã€‚å¦‚æœä½ å¯¹é‡Œé¢æ¯ä¸ªç‚¹çš„æ„ä¹‰æ„Ÿå…´è¶£ï¼Œå¯ä»¥ç‚¹å‡»æŸä¸ªç‚¹ï¼ŒæŸ¥çœ‹å…¶ç¼–å·ï¼Œç„¶åç”¨ä¸‹é¢çš„ä»£ç è¿˜åŸå‡ºå•è¯æ¥çœ‹çœ‹ï¼š</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">index_word = &#123;v: k <span class="keyword">for</span> k, v <span class="keyword">in</span> imdb.get_word_index().items()&#125;</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">show_word_of_index</span><span class="params">(idx)</span>:</span>  <span class="comment"># idx è¾“å…¥çœ‹åˆ°çš„è¯ç¼–å·</span></span><br><span class="line">    print(index_word[idx])</span><br><span class="line"></span><br><span class="line">show_word_of_index(<span class="number">123</span>)</span><br></pre></td></tr></table></figure>
<pre><code>ever
</code></pre>

  </div>
</article>
<!--Disqus-->


<!--Livere-->

    <div class="blog-post-comments">
        <div id="lv-container" data-id="city" data-uid="MTAyMC80NjEzMi8yMjY0Mw==">
            <noscript>ä¸å¯ç”¨ JavaScript æ”¯æŒçš„äººæ˜¯çœ‹ä¸åˆ°å¯çˆ±çš„è¯„è®ºåŒºçš„ã€‚ğŸ˜¥</noscript>
        </div>
    </div>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">é¦–é¡µ</a></li>
         
          <li><a href="/about/">å…³äº</a></li>
         
          <li><a href="/archives/">å½’æ¡£</a></li>
         
          <li><a href="https://github.com/cdfmlr">é¡¹ç›®</a></li>
         
          <li><a href="/search/">æœç´¢</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#deep-learning-with-python"><span class="toc-number">1.</span> <span class="toc-text"> Deep Learning with Python</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#72-inspecting-and-monitoring-deep-learning-models-using-keras-callbacks-and-tensorboard"><span class="toc-number">1.1.</span> <span class="toc-text"> 7.2 Inspecting and monitoring deep-learning models using Keras callbacks and TensorBoard</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#è®­ç»ƒä¸­å°†å›è°ƒå‡½æ•°ä½œç”¨äºæ¨¡å‹"><span class="toc-number">1.1.1.</span> <span class="toc-text"> è®­ç»ƒä¸­å°†å›è°ƒå‡½æ•°ä½œç”¨äºæ¨¡å‹</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ä½¿ç”¨-callback"><span class="toc-number">1.1.1.1.</span> <span class="toc-text"> ä½¿ç”¨ callback</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ç¼–å†™è‡ªå·±çš„å›è°ƒå‡½æ•°"><span class="toc-number">1.1.1.2.</span> <span class="toc-text"> ç¼–å†™è‡ªå·±çš„å›è°ƒå‡½æ•°</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tensorboard-ç®€ä»‹-tensorflow-çš„å¯è§†åŒ–æ¡†æ¶"><span class="toc-number">1.1.2.</span> <span class="toc-text"> TensorBoard ç®€ä»‹: TensorFlow çš„å¯è§†åŒ–æ¡†æ¶</span></a></li></ol></li></ol></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://clownote.github.io/2020/08/18/DeepLearningWithPython/Deep-Learning with-Python-ch7_2/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://clownote.github.io/2020/08/18/DeepLearningWithPython/Deep-Learning with-Python-ch7_2/&text=Pythonæ·±åº¦å­¦ä¹ ä¹‹Keraså›è°ƒå‡½æ•°ä¸TensorBoard"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://clownote.github.io/2020/08/18/DeepLearningWithPython/Deep-Learning with-Python-ch7_2/&title=Pythonæ·±åº¦å­¦ä¹ ä¹‹Keraså›è°ƒå‡½æ•°ä¸TensorBoard"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://clownote.github.io/2020/08/18/DeepLearningWithPython/Deep-Learning with-Python-ch7_2/&is_video=false&description=Pythonæ·±åº¦å­¦ä¹ ä¹‹Keraså›è°ƒå‡½æ•°ä¸TensorBoard"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Pythonæ·±åº¦å­¦ä¹ ä¹‹Keraså›è°ƒå‡½æ•°ä¸TensorBoard&body=Check out this article: https://clownote.github.io/2020/08/18/DeepLearningWithPython/Deep-Learning with-Python-ch7_2/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://clownote.github.io/2020/08/18/DeepLearningWithPython/Deep-Learning with-Python-ch7_2/&title=Pythonæ·±åº¦å­¦ä¹ ä¹‹Keraså›è°ƒå‡½æ•°ä¸TensorBoard"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://clownote.github.io/2020/08/18/DeepLearningWithPython/Deep-Learning with-Python-ch7_2/&title=Pythonæ·±åº¦å­¦ä¹ ä¹‹Keraså›è°ƒå‡½æ•°ä¸TensorBoard"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://clownote.github.io/2020/08/18/DeepLearningWithPython/Deep-Learning with-Python-ch7_2/&title=Pythonæ·±åº¦å­¦ä¹ ä¹‹Keraså›è°ƒå‡½æ•°ä¸TensorBoard"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://clownote.github.io/2020/08/18/DeepLearningWithPython/Deep-Learning with-Python-ch7_2/&title=Pythonæ·±åº¦å­¦ä¹ ä¹‹Keraså›è°ƒå‡½æ•°ä¸TensorBoard"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://clownote.github.io/2020/08/18/DeepLearningWithPython/Deep-Learning with-Python-ch7_2/&name=Pythonæ·±åº¦å­¦ä¹ ä¹‹Keraså›è°ƒå‡½æ•°ä¸TensorBoard&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> èœå•</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> ç›®å½•</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> åˆ†äº«</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> è¿”å›é¡¶éƒ¨</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2020 CDFMLR
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">é¦–é¡µ</a></li>
         
          <li><a href="/about/">å…³äº</a></li>
         
          <li><a href="/archives/">å½’æ¡£</a></li>
         
          <li><a href="https://github.com/cdfmlr">é¡¹ç›®</a></li>
         
          <li><a href="/search/">æœç´¢</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.0/dist/katex.min.css">

    <!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>
<!-- clipboard -->

  <script src="/lib/clipboard/clipboard.min.js"></script>
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"å¤åˆ¶åˆ°ç²˜è´´æ¿!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight .code pre").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      target: function(trigger) {
        return trigger.nextElementSibling;
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "å¤åˆ¶æˆåŠŸ!");
      e.clearSelection();
    })
  })
  </script>

<script src="/js/main.js"></script>
<!-- search -->

<!-- Google Analytics -->

    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-146911386-1', 'auto');
        ga('send', 'pageview');
    </script>

<!-- Baidu Analytics -->

    <script type="text/javascript">
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?9a0d2e6fde93dad496ac79f04f3aba97";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>

<!-- Disqus Comments -->


<!--Livere Comments-->

    <script type="text/javascript">
      (function (d, s) {
        var j, e = d.getElementsByTagName(s)[0];

        if (typeof LivereTower === 'function') { return; }

        j = d.createElement(s);
        j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
        j.async = true;

        e.parentNode.insertBefore(j, e);
      })(document, 'script');
    </script>

</body>
</html>
