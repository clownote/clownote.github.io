<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="KMPæš´åŠ›ç®—æ³•æ˜¯åœ¨å¤±é…æ—¶ï¼Œå›æº¯å­ä¸²æŒ‡é’ˆï¼Œä»å¤´å¼€å§‹åŒ¹é…ã€‚è€Œ KMP å¤±é…æ—¶å°è¯•æ›´æœ‰è¿›å–å¿ƒåœ°å¾€å‰èµ°ï¼Œæ è¿‡é‚£äº›ä¸å¯èƒ½åŒ¹é…çš„æƒ…å†µã€‚å¾€å‰ç§»åŠ¨çš„é•¿åº¦ç”±ä¸€ä¸ªã€Œéƒ¨åˆ†åŒ¹é…è¡¨ã€æ¥ç¡®å®šã€‚  ï¼ˆå›¾ç‰‡æ¥è‡ª CLRSã€ŠIntroduction to Algorithms, 3rd Edã€‹[^1]ï¼‰ éƒ¨åˆ†åŒ¹é…è¡¨å…¶å®å°±æ˜¯å¤±é…é‚£ä¸ªä½ç½®å‰é¢ï¼ˆåŒ¹é…ä¸Šçš„ï¼‰é‡Œé¢æœ€é•¿çš„å…¬å…±å‰åç¼€é•¿åº¦ï¼Œç§»åŠ¨å°±æ˜¯è¦æŠŠå‰ç¼€ç›´æ¥å¯¹ä¸Šåç¼€é‚£ä¸ªä½ç½®ï¼Œå°±ç•¥è¿‡äº†ä¸­é—´ä¸å¯èƒ½">
<meta property="og:type" content="article">
<meta property="og:title" content="KMP ç®—æ³•æ³¨è§£">
<meta property="og:url" content="https://clownote.github.io/2021/07/15/Algorithm/KMP/index.html">
<meta property="og:site_name" content="clownote">
<meta property="og:description" content="KMPæš´åŠ›ç®—æ³•æ˜¯åœ¨å¤±é…æ—¶ï¼Œå›æº¯å­ä¸²æŒ‡é’ˆï¼Œä»å¤´å¼€å§‹åŒ¹é…ã€‚è€Œ KMP å¤±é…æ—¶å°è¯•æ›´æœ‰è¿›å–å¿ƒåœ°å¾€å‰èµ°ï¼Œæ è¿‡é‚£äº›ä¸å¯èƒ½åŒ¹é…çš„æƒ…å†µã€‚å¾€å‰ç§»åŠ¨çš„é•¿åº¦ç”±ä¸€ä¸ªã€Œéƒ¨åˆ†åŒ¹é…è¡¨ã€æ¥ç¡®å®šã€‚  ï¼ˆå›¾ç‰‡æ¥è‡ª CLRSã€ŠIntroduction to Algorithms, 3rd Edã€‹[^1]ï¼‰ éƒ¨åˆ†åŒ¹é…è¡¨å…¶å®å°±æ˜¯å¤±é…é‚£ä¸ªä½ç½®å‰é¢ï¼ˆåŒ¹é…ä¸Šçš„ï¼‰é‡Œé¢æœ€é•¿çš„å…¬å…±å‰åç¼€é•¿åº¦ï¼Œç§»åŠ¨å°±æ˜¯è¦æŠŠå‰ç¼€ç›´æ¥å¯¹ä¸Šåç¼€é‚£ä¸ªä½ç½®ï¼Œå°±ç•¥è¿‡äº†ä¸­é—´ä¸å¯èƒ½">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://clownote.github.io/2021/07/15/Algorithm/KMP/KMP/kmp.png">
<meta property="og:image" content="https://clownote.github.io/2021/07/15/Algorithm/KMP/KMP/pmt.png">
<meta property="article:published_time" content="2021-07-15T00:16:30.071Z">
<meta property="article:modified_time" content="2022-06-14T13:57:20.114Z">
<meta property="article:author" content="CDFMLR">
<meta property="article:tag" content="Algorithm">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://clownote.github.io/2021/07/15/Algorithm/KMP/KMP/kmp.png">
    
    
        
          
              <link rel="shortcut icon" href="/images/rabbit.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/rabbit_192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/rabbit_180.png">
          
        
    
    <!-- title -->
    <title>KMP ç®—æ³•æ³¨è§£</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
      
<link rel="stylesheet" href="/css/rtl.css">

    
    <!-- rss -->
    
    
    <!--Google search varification (PRIVATE)-->
    <meta name="google-site-verification" content="MrqlpFAD8nDanw3Ypv7ZsIWHLnTdhRuLa4QhSVwxIvc" />
    <!--Google AdSense å…³è” (PRIVATE)-->
    <script data-ad-client="ca-pub-1510963483941114" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<meta name="generator" content="Hexo 5.4.0"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">é¦–é¡µ</a></li>
         
          <li><a href="/about/">å…³äº</a></li>
         
          <li><a href="/archives/">å½’æ¡£</a></li>
         
          <li><a target="_blank" rel="noopener" href="https://github.com/cdfmlr">é¡¹ç›®</a></li>
         
          <li><a href="/search/">æœç´¢</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2021/07/23/Rust/HelloRust/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2021/05/31/Math/R-da/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">ä¸Šä¸€ç¯‡</span>
      <span id="i-next" class="info" style="display:none;">ä¸‹ä¸€ç¯‡</span>
      <span id="i-top" class="info" style="display:none;">è¿”å›é¡¶éƒ¨</span>
      <span id="i-share" class="info" style="display:none;">åˆ†äº«æ–‡ç« </span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://clownote.github.io/2021/07/15/Algorithm/KMP/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://clownote.github.io/2021/07/15/Algorithm/KMP/&text=KMP ç®—æ³•æ³¨è§£"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://clownote.github.io/2021/07/15/Algorithm/KMP/&title=KMP ç®—æ³•æ³¨è§£"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://clownote.github.io/2021/07/15/Algorithm/KMP/&is_video=false&description=KMP ç®—æ³•æ³¨è§£"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=KMP ç®—æ³•æ³¨è§£&body=Check out this article: https://clownote.github.io/2021/07/15/Algorithm/KMP/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://clownote.github.io/2021/07/15/Algorithm/KMP/&title=KMP ç®—æ³•æ³¨è§£"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://clownote.github.io/2021/07/15/Algorithm/KMP/&title=KMP ç®—æ³•æ³¨è§£"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://clownote.github.io/2021/07/15/Algorithm/KMP/&title=KMP ç®—æ³•æ³¨è§£"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://clownote.github.io/2021/07/15/Algorithm/KMP/&title=KMP ç®—æ³•æ³¨è§£"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://clownote.github.io/2021/07/15/Algorithm/KMP/&name=KMP ç®—æ³•æ³¨è§£&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#KMP"><span class="toc-number">1.</span> <span class="toc-text">KMP</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%83%A8%E5%88%86%E5%8C%B9%E9%85%8D%E8%A1%A8"><span class="toc-number">1.1.</span> <span class="toc-text">éƒ¨åˆ†åŒ¹é…è¡¨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8C%B9%E9%85%8D"><span class="toc-number">1.2.</span> <span class="toc-text">åŒ¹é…</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#next-%E6%95%B0%E7%BB%84"><span class="toc-number">1.3.</span> <span class="toc-text">next æ•°ç»„</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9B%B4%E5%A5%BD%E7%90%86%E8%A7%A3%E7%9A%84%E4%BB%A3%E7%A0%81"><span class="toc-number">1.4.</span> <span class="toc-text">æ›´å¥½ç†è§£çš„ä»£ç </span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%94%B9%E8%BF%9B-KMP"><span class="toc-number">2.</span> <span class="toc-text">æ”¹è¿› KMP</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%8E%A8%E8%8D%90%E9%98%85%E8%AF%BB"><span class="toc-number">3.</span> <span class="toc-text">æ¨èé˜…è¯»</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE"><span class="toc-number">4.</span> <span class="toc-text">å‚è€ƒæ–‡çŒ®</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        KMP ç®—æ³•æ³¨è§£
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">clownote</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2021-07-15T00:16:30.071Z" itemprop="datePublished">2021-07-15</time>
        
        (Updated: <time datetime="2022-06-14T13:57:20.114Z" itemprop="dateModified">2022-06-14</time>)
        
      
    </div>


      

      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link-link" href="/tags/Algorithm/" rel="tag">Algorithm</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h1 id="KMP"><a href="#KMP" class="headerlink" title="KMP"></a>KMP</h1><p>æš´åŠ›ç®—æ³•æ˜¯åœ¨å¤±é…æ—¶ï¼Œå›æº¯å­ä¸²æŒ‡é’ˆï¼Œä»å¤´å¼€å§‹åŒ¹é…ã€‚è€Œ KMP å¤±é…æ—¶å°è¯•æ›´æœ‰è¿›å–å¿ƒåœ°å¾€å‰èµ°ï¼Œæ è¿‡é‚£äº›ä¸å¯èƒ½åŒ¹é…çš„æƒ…å†µã€‚å¾€å‰ç§»åŠ¨çš„é•¿åº¦ç”±ä¸€ä¸ªã€Œéƒ¨åˆ†åŒ¹é…è¡¨ã€æ¥ç¡®å®šã€‚</p>
<p><img src="KMP/kmp.png" alt="KMP"></p>
<p>ï¼ˆå›¾ç‰‡æ¥è‡ª CLRSã€ŠIntroduction to Algorithms, 3rd Edã€‹[^1]ï¼‰</p>
<p>éƒ¨åˆ†åŒ¹é…è¡¨å…¶å®å°±æ˜¯å¤±é…é‚£ä¸ªä½ç½®å‰é¢ï¼ˆåŒ¹é…ä¸Šçš„ï¼‰é‡Œé¢æœ€é•¿çš„å…¬å…±å‰åç¼€é•¿åº¦ï¼Œç§»åŠ¨å°±æ˜¯è¦æŠŠå‰ç¼€ç›´æ¥å¯¹ä¸Šåç¼€é‚£ä¸ªä½ç½®ï¼Œå°±ç•¥è¿‡äº†ä¸­é—´ä¸å¯èƒ½åŒ¹é…ï¼ˆå·²ç»æ‰«è¿‡äº†ï¼Œåé¢ä¸åŒ¹é…ï¼Œå†é‡å¤æ‰«ä¹Ÿè¿˜æ˜¯ä¸åŒ¹é…ï¼‰çš„é‚£ä¸€æ®µï¼Œç›´æ¥å¼€å§‹å°è¯•ä¸‹ä¸€ä¸ªå¯èƒ½çš„åŒ¹é…ã€‚</p>
<h2 id="éƒ¨åˆ†åŒ¹é…è¡¨"><a href="#éƒ¨åˆ†åŒ¹é…è¡¨" class="headerlink" title="éƒ¨åˆ†åŒ¹é…è¡¨"></a>éƒ¨åˆ†åŒ¹é…è¡¨</h2><p>å‚è€ƒ Wikipedia çš„ç®—æ³• [^2]ï¼ˆçœ‹è‹±æ–‡é¡µï¼Œä¸­æ–‡é¡µæ²¡å†™å…¨ï¼Œæœ‰äº›æ®µè½ç¼ºå¤±ï¼‰ã€‚</p>
<p><strong>æ‰‹ç®—</strong>ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">GetNext</span><span class="params">(substr: <span class="keyword">string</span>)</span> []<span class="title">int</span></span> &#123;  <span class="comment">// substr: [0â€¦M-1]</span></span><br><span class="line">    M := <span class="built_in">len</span>(substr)</span><br><span class="line">    next := <span class="built_in">make</span>([]<span class="keyword">int</span>, M)</span><br><span class="line"></span><br><span class="line">    next[<span class="number">0</span>] = <span class="number">-1</span></span><br><span class="line">    <span class="keyword">for</span> j := <span class="number">1</span>; j &lt;= M; j++ &#123;</span><br><span class="line">        next[j] = <span class="built_in">len</span>(</span><br><span class="line">            æœ€é•¿å…¬å…±å‰åç¼€(substr[<span class="number">0</span>:j])  <span class="comment">// å°±æ˜¯ j é‚£ä¸ªå­—ç¬¦ä¹‹å‰çš„</span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> next</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å…¶ä¸­ã€Œæœ€é•¿å…¬å…±å‰åç¼€ã€å°±æ˜¯ä¾‹å¦‚ï¼š</p>
<p><img src="KMP/pmt.png" alt="æœ€é•¿å…¬å…±å‰åç¼€"></p>
<p>ï¼ˆå›¾ç‰‡æ¥è‡ª é˜®ä¸€å³°ã€Šå­—ç¬¦ä¸²åŒ¹é…çš„KMPç®—æ³•ã€‹[^3]ï¼‰</p>
<p><strong>ç¼–ç¨‹</strong>å¿«é€Ÿè®¡ç®—ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">GetNext</span><span class="params">(substr <span class="keyword">string</span>)</span> []<span class="title">int</span></span> &#123;</span><br><span class="line">	next := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="built_in">len</span>(substr))</span><br><span class="line">	next[<span class="number">0</span>] = <span class="number">-1</span></span><br><span class="line"></span><br><span class="line">	i, j := <span class="number">0</span>, <span class="number">-1</span></span><br><span class="line">	<span class="keyword">for</span> i &lt; <span class="built_in">len</span>(substr)<span class="number">-1</span> &#123;</span><br><span class="line">		<span class="keyword">if</span> j == <span class="number">-1</span> || substr[i] == substr[j] &#123;</span><br><span class="line">			i++</span><br><span class="line">			j++</span><br><span class="line">			next[i] = j</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			j = next[j]</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> next</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="åŒ¹é…"><a href="#åŒ¹é…" class="headerlink" title="åŒ¹é…"></a>åŒ¹é…</h2><p>KMPï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">KMP</span><span class="params">(s <span class="keyword">string</span>, substr <span class="keyword">string</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">	next := GetNext(substr)</span><br><span class="line"></span><br><span class="line">	i, j := <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">	<span class="keyword">for</span> i &lt; <span class="built_in">len</span>(s) &amp;&amp; j &lt; <span class="built_in">len</span>(substr) &#123;</span><br><span class="line">		<span class="keyword">if</span> j == <span class="number">-1</span> || s[i] == substr[j] &#123;</span><br><span class="line">			i++</span><br><span class="line">			j++</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123; <span class="comment">// miss matching</span></span><br><span class="line">			j = next[j]</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> j &gt;= <span class="built_in">len</span>(substr) &#123; <span class="comment">// matched</span></span><br><span class="line">		<span class="keyword">return</span> i - <span class="built_in">len</span>(substr)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">-1</span> <span class="comment">// not matched</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªç¨‹åºæ˜¯çœŸçš„å¯ä»¥è¿è¡Œçš„ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	s := <span class="string">&quot;BBC ABCDAB ABCDABCDABDE&quot;</span></span><br><span class="line">	sub := <span class="string">&quot;ABCDABD&quot;</span></span><br><span class="line"></span><br><span class="line">	res := KMP(s, sub)</span><br><span class="line">	<span class="built_in">println</span>(res)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="next-æ•°ç»„"><a href="#next-æ•°ç»„" class="headerlink" title="next æ•°ç»„"></a>next æ•°ç»„</h2><p>è¡¥å……ä¸€ç‚¹ï¼šéƒ¨åˆ†åŒ¹é…è¡¨ï¼Œè¿˜æœ‰å‡ ç§ä¸åŒçš„ç‰ˆæœ¬ï¼Œæ¯”å¦‚ã€Šç®—æ³•å¯¼è®ºã€‹[^1]  ä¸Šçš„ï¼Œå†æ¯”å¦‚æˆ‘ä»¬çš„è€ƒç ”ä¹¦ï¼ˆå¤©å‹¤ç‹é“ï¼‰[^4]$^,$[^5]ä¸Šçš„ã€‚</p>
<p>ï¼ˆè€ƒç ”ä¹¦ä¸ŠæŠŠéƒ¨åˆ†åŒ¹é…è¡¨äº²åˆ‡åœ°ç§°ä¸º â€œ<strong>next æ•°ç»„</strong>â€ã€‚ã€‚ã€‚ï¼‰</p>
<p>è¿™å‡ ç§çš„åŒºåˆ«çœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š</p>
<table>
<thead>
<tr>
<th>index</th>
<th>0</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
<th>6</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>char</td>
<td>a</td>
<td>b</td>
<td>a</td>
<td>b</td>
<td>a</td>
<td>c</td>
<td>a</td>
<td></td>
</tr>
<tr>
<td>CLRS</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>0</td>
<td>1</td>
<td></td>
</tr>
<tr>
<td>Wikipedia</td>
<td>-1</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>0</td>
<td>= CLRS å³ç§»ä¸€ä¸ªï¼Œå·¦è¾¹è¡¥<code>-1</code></td>
</tr>
<tr>
<td>å¤©å‹¤ç‹é“</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>1</td>
<td>= Wikipedia + 1</td>
</tr>
</tbody></table>
<p>è‹¥åœ¨åŸä¸²ï¼ˆå¤§çš„ï¼‰ç´¢å¼• <code>i</code> å¤„ã€æ¨¡å¼ï¼ˆå­ä¸²ï¼‰ç´¢å¼• <code>j</code> å¤„å¤±é…ï¼š</p>
<ul>
<li>CLRS ç§»åŠ¨åˆ° <code>T[j-1]</code> ä¸Šï¼ˆç‰¹æ®Šæƒ…å†µï¼š<code>j=0</code> åˆ™ <code>i+=1</code>ï¼‰</li>
<li>Wikipedia ç§»åˆ° <code>T[j]</code> ä¸Šï¼ˆç‰¹æ®Šæƒ…å†µï¼š<code>j=-1</code> åˆ™ <code>j+=1</code>ï¼‰ã€‚</li>
</ul>
<h2 id="æ›´å¥½ç†è§£çš„ä»£ç "><a href="#æ›´å¥½ç†è§£çš„ä»£ç " class="headerlink" title="æ›´å¥½ç†è§£çš„ä»£ç "></a>æ›´å¥½ç†è§£çš„ä»£ç </h2><p>è¯´å®è¯ï¼Œæˆ‘çœ‹ä¸æ‡‚ä¸Šé¢ç»™çš„ä»£ç ã€‚ä¸»è¦æ˜¯è¿™æ®µ <code>if (j==-1 || s[i] == substr[j]) &#123;...&#125;</code> WTFï¼Ÿï¼Ÿ</p>
<p>ç ”ç©¶äº†å¥½ä¹…æ‰çœ‹æ‡‚æ˜æ˜å°±æ˜¯ä¸¤ç§ä¸åŒçš„æƒ…å†µï¼Œåªæ˜¯å‡‘å·§å¤„ç†æ–¹å¼ä¸€æ ·å°±åˆå¹¶åœ¨ä¸€èµ·ï¼Œï¼Œæè¿™å„¿å†™æ±‡ç¼–å‘¢ã€‚ã€‚åäº†ã€‚</p>
<p>å‚è€ƒ <a target="_blank" rel="noopener" href="https://www.zhihu.com/question/21923021/answer/1032665486">çŸ¥ä¹ä¸Šçš„å›ç­”</a> [^6] æŠŠè¿™ä¸¤ç§æƒ…å†µåˆ†å¼€å†™å°±å®¹æ˜“ç†è§£å¤šäº†ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">GetNext</span><span class="params">(substr <span class="keyword">string</span>)</span> []<span class="title">int</span></span> &#123;</span><br><span class="line">	next := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="built_in">len</span>(substr))</span><br><span class="line">	next[<span class="number">0</span>] = <span class="number">-1</span></span><br><span class="line"></span><br><span class="line">	i, j := <span class="number">0</span>, <span class="number">-1</span></span><br><span class="line">	<span class="keyword">for</span> i &lt; <span class="built_in">len</span>(substr)<span class="number">-1</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> j == <span class="number">-1</span> &#123; <span class="comment">// ç‰¹æ®Š: åˆ°å¤´äº†: æœ€å°äº†ï¼Œæ— å¯å†ç¼©</span></span><br><span class="line">			i++</span><br><span class="line">			j = <span class="number">0</span></span><br><span class="line">			next[i] = j</span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> substr[i] == substr[j] &#123; <span class="comment">// é…ä¸Šäº†ï¼šæ‰©å¤§ä¸€ä½</span></span><br><span class="line">			i++</span><br><span class="line">			j++</span><br><span class="line">			next[i] = j</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123; <span class="comment">// å¤±é…ï¼šç¼©å°ï¼Œé‡æ–°åŒ¹é…</span></span><br><span class="line">			j = next[j]</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> next</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">KMP</span><span class="params">(s <span class="keyword">string</span>, substr <span class="keyword">string</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">	next := GetNext(substr)</span><br><span class="line"></span><br><span class="line">	i, j := <span class="number">0</span>, <span class="number">0</span> <span class="comment">// i æ˜¯ s çš„ï¼Œj æ˜¯ substr çš„</span></span><br><span class="line">	<span class="keyword">for</span> i &lt; <span class="built_in">len</span>(s) &amp;&amp; j &lt; <span class="built_in">len</span>(substr) &#123;</span><br><span class="line">        <span class="keyword">if</span> j == <span class="number">-1</span> &#123; <span class="comment">// ç‰¹æ®Š: å›åˆ°å¤´äº†: i ç§»ä¸€ä¸ªï¼Œj ä»å¤´æ¯”è¾ƒ</span></span><br><span class="line">			i++</span><br><span class="line">			j = <span class="number">0</span></span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> s[i] == substr[j] &#123; <span class="comment">// é…ä¸Šäº†: ä¸‹ä¸€ä¸ªå­—ç¬¦</span></span><br><span class="line">			i++</span><br><span class="line">			j++</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123; <span class="comment">// å¤±é…: j ç§»åˆ°ä¸‹ä¸€ä¸ªå¯èƒ½åŒ¹é…çš„ä½ç½®</span></span><br><span class="line">			j = next[j]</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> j &gt;= <span class="built_in">len</span>(substr) &#123; <span class="comment">// matched</span></span><br><span class="line">		<span class="keyword">return</span> i - <span class="built_in">len</span>(substr)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">-1</span> <span class="comment">// not matched</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="æ”¹è¿›-KMP"><a href="#æ”¹è¿›-KMP" class="headerlink" title="æ”¹è¿› KMP"></a>æ”¹è¿› KMP</h1><p>è€ƒç ”ä¹¦ä¸Šçš„ï¼Œç”¨ä¸ª <code>nextval</code> æ›¿ä»£ <code>next</code> æ•°ç»„ã€‚</p>
<p><code>nextval</code> æ„é€ è§„åˆ™å¦‚ä¸‹ï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">nextval[<span class="number">0</span>] = <span class="number">-1</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt; len(substr); j++) &#123;</span><br><span class="line">    nextval[j] = (substr[j] != substr[next[j]] ? </span><br><span class="line">        next[j] :</span><br><span class="line">        nextval[next[j]]</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å°±æ˜¯æ„å»ºéƒ¨åˆ†åŒ¹é…è¡¨ï¼Œå›æº¯ï¼ˆç¼©å°ï¼‰çš„æ—¶å€™ï¼Œå¦‚æœå›åˆ°çš„ä¸Šä¸€æ­¥ <code>next[j]</code> çš„å­—ç¬¦å’Œå½“å‰å­—ç¬¦ç›¸åŒï¼Œå°±ä¸å¿…ä¸€æ­¥æ­¥å›æº¯äº†ï¼ˆä¹‹å‰å·²ç»èµ°è¿‡äº†ï¼‰ï¼Œç›´æ¥å€Ÿç”¨ä¹‹å‰çš„ç»“æœï¼Œå¿«é€Ÿå›æº¯åˆ°å¤´ã€‚</p>
<p>e.g.</p>
<table>
<thead>
<tr>
<th>substr</th>
<th>A</th>
<th>B</th>
<th>A</th>
<th>B</th>
<th>A</th>
<th>A</th>
<th>B</th>
</tr>
</thead>
<tbody><tr>
<td>j</td>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
<td>6</td>
</tr>
<tr>
<td>next</td>
<td>-1</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>1</td>
</tr>
<tr>
<td>nextval</td>
<td>-1</td>
<td>0</td>
<td>-1</td>
<td>0</td>
<td>-1</td>
<td>3</td>
<td>0</td>
</tr>
</tbody></table>
<p>ï¼ˆè®°å¾—è€ƒéªŒä¹¦ä¸Šç´¢å¼•ä» 1 å¼€å§‹ï¼Œnextã€nextval çš„å€¼éƒ½è¦åŠ ä¸€ï¼‰</p>
<h1 id="æ¨èé˜…è¯»"><a href="#æ¨èé˜…è¯»" class="headerlink" title="æ¨èé˜…è¯»"></a>æ¨èé˜…è¯»</h1><p>è¿˜æœ‰ä¸‹é¢å‚è€ƒæ–‡çŒ®çš„é˜®ä¸€å³°ï¼Œé€šä¿—æ˜“æ‡‚ï¼Œçœ‹è¿™ç¯‡æ‰‹ç®—å°±å¤Ÿäº†ã€‚Wikipedia çš„ä¹Ÿè¿˜è¡Œï¼ˆä¸€å®šè¦çœ‹è‹±æ–‡é¡µï¼‰ã€‚</p>
<p>æœ‰æ—¶é—´å†å•ƒ CLRSã€‚</p>
<p>æ­»èƒŒä»£ç çš„è¯ï¼Œå¤©å‹¤ç‹é“ã€‚</p>
<p>è¿˜æœ‰ <a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/implement-strstr/solution/kmp-suan-fa-xiang-jie-by-labuladong/">https://leetcode-cn.com/problems/implement-strstr/solution/kmp-suan-fa-xiang-jie-by-labuladong/</a> è¿™ç¯‡å†™çš„ä¹Ÿå±Œï¼ˆè¿™ä¸ªå¤§ä½¬çš„å…¬ä¼—å·æˆ‘å…³æ³¨äº†æ•°å¹´äº†ï¼‰ï¼Œç”¨åŠ¨è§„ï¼ˆå…¶å®æ˜¯ DFAï¼‰è§£é‡Šäº† KMPï¼Œæ¨èé˜…è¯»ã€‚</p>
<h1 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h1><p>[^1]: Cormen T H , Leiserson C E , Rivest R L , et al. Introduction to Algorithms, 3rd Ed.</p>
<p>[^2]: Wikipedia. Knuthâ€“Morrisâ€“Pratt algorithm. <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm">https://en.wikipedia.org/wiki/Knuthâ€“Morrisâ€“Pratt_algorithm</a></p>
<p>[^3]: é˜®ä¸€å³°. å­—ç¬¦ä¸²åŒ¹é…çš„KMPç®—æ³•. <a target="_blank" rel="noopener" href="http://www.ruanyifeng.com/blog/2013/05/Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm.html">http://www.ruanyifeng.com/blog/2013/05/Knuthâ€“Morrisâ€“Pratt_algorithm.html</a> </p>
<p>[^4]: ç‡è¾‰ä¸»ç¼–. æ•°æ®ç»“æ„é«˜åˆ†ç¬”è®°ï¼ˆ2022ç‰ˆ å¤©å‹¤ç¬¬10ç‰ˆï¼‰.  æœºæ¢°å·¥ä¸šå‡ºç‰ˆç¤¾, 2020.<br>[^5]: ç‹é“è®ºå›ç»„ç¼–. 2022å¹´æ•°æ®ç»“æ„è€ƒéªŒå¤ä¹ æŒ‡å¯¼. ç”µå­å·¥ä¸šå‡ºç‰ˆç¤¾, 2021<br>[^6]: é˜®è¡Œæ­¢. å¦‚ä½•æ›´å¥½åœ°ç†è§£å’ŒæŒæ¡ KMP ç®—æ³•?. <a target="_blank" rel="noopener" href="https://www.zhihu.com/question/21923021/answer/1032665486">https://www.zhihu.com/question/21923021/answer/1032665486</a></p>

  </div>
</article>
<!--Disqus-->


<!--Livere-->

    <div class="blog-post-comments">
        <div id="lv-container" data-id="city" data-uid="MTAyMC80NjEzMi8yMjY0Mw==">
            <noscript>ä¸å¯ç”¨ JavaScript æ”¯æŒçš„äººæ˜¯çœ‹ä¸åˆ°å¯çˆ±çš„è¯„è®ºåŒºçš„ã€‚ğŸ˜¥</noscript>
        </div>
    </div>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">é¦–é¡µ</a></li>
         
          <li><a href="/about/">å…³äº</a></li>
         
          <li><a href="/archives/">å½’æ¡£</a></li>
         
          <li><a target="_blank" rel="noopener" href="https://github.com/cdfmlr">é¡¹ç›®</a></li>
         
          <li><a href="/search/">æœç´¢</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#KMP"><span class="toc-number">1.</span> <span class="toc-text">KMP</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%83%A8%E5%88%86%E5%8C%B9%E9%85%8D%E8%A1%A8"><span class="toc-number">1.1.</span> <span class="toc-text">éƒ¨åˆ†åŒ¹é…è¡¨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8C%B9%E9%85%8D"><span class="toc-number">1.2.</span> <span class="toc-text">åŒ¹é…</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#next-%E6%95%B0%E7%BB%84"><span class="toc-number">1.3.</span> <span class="toc-text">next æ•°ç»„</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9B%B4%E5%A5%BD%E7%90%86%E8%A7%A3%E7%9A%84%E4%BB%A3%E7%A0%81"><span class="toc-number">1.4.</span> <span class="toc-text">æ›´å¥½ç†è§£çš„ä»£ç </span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%94%B9%E8%BF%9B-KMP"><span class="toc-number">2.</span> <span class="toc-text">æ”¹è¿› KMP</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%8E%A8%E8%8D%90%E9%98%85%E8%AF%BB"><span class="toc-number">3.</span> <span class="toc-text">æ¨èé˜…è¯»</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE"><span class="toc-number">4.</span> <span class="toc-text">å‚è€ƒæ–‡çŒ®</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://clownote.github.io/2021/07/15/Algorithm/KMP/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://clownote.github.io/2021/07/15/Algorithm/KMP/&text=KMP ç®—æ³•æ³¨è§£"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://clownote.github.io/2021/07/15/Algorithm/KMP/&title=KMP ç®—æ³•æ³¨è§£"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://clownote.github.io/2021/07/15/Algorithm/KMP/&is_video=false&description=KMP ç®—æ³•æ³¨è§£"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=KMP ç®—æ³•æ³¨è§£&body=Check out this article: https://clownote.github.io/2021/07/15/Algorithm/KMP/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://clownote.github.io/2021/07/15/Algorithm/KMP/&title=KMP ç®—æ³•æ³¨è§£"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://clownote.github.io/2021/07/15/Algorithm/KMP/&title=KMP ç®—æ³•æ³¨è§£"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://clownote.github.io/2021/07/15/Algorithm/KMP/&title=KMP ç®—æ³•æ³¨è§£"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://clownote.github.io/2021/07/15/Algorithm/KMP/&title=KMP ç®—æ³•æ³¨è§£"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://clownote.github.io/2021/07/15/Algorithm/KMP/&name=KMP ç®—æ³•æ³¨è§£&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> èœå•</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> ç›®å½•</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> åˆ†äº«</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> è¿”å›é¡¶éƒ¨</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2022 CDFMLR
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">é¦–é¡µ</a></li>
         
          <li><a href="/about/">å…³äº</a></li>
         
          <li><a href="/archives/">å½’æ¡£</a></li>
         
          <li><a target="_blank" rel="noopener" href="https://github.com/cdfmlr">é¡¹ç›®</a></li>
         
          <li><a href="/search/">æœç´¢</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->

<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">


<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.0/dist/katex.min.css">


    <!-- jquery -->

<script src="/lib/jquery/jquery.min.js"></script>


<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>

<!-- clipboard -->

  
<script src="/lib/clipboard/clipboard.min.js"></script>

  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"å¤åˆ¶åˆ°ç²˜è´´æ¿!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight .code pre").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      target: function(trigger) {
        return trigger.nextElementSibling;
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "å¤åˆ¶æˆåŠŸ!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-146911386-1', 'auto');
        ga('send', 'pageview');
    </script>
    
    <!-- New: global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-146911386-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-146911386-1');
    </script>
    

<!-- Baidu Analytics -->

    <script type="text/javascript">
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?9a0d2e6fde93dad496ac79f04f3aba97";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>

<!-- Disqus Comments -->


<!--Livere Comments-->

    <script type="text/javascript">
      (function (d, s) {
        var j, e = d.getElementsByTagName(s)[0];

        if (typeof LivereTower === 'function') { return; }

        j = d.createElement(s);
        j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
        j.async = true;

        e.parentNode.insertBefore(j, e);
      })(document, 'script');
    </script>


</body>
</html>
