<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="å¼‚æ­¥ç¼–ç¨‹ä¸ Combineå¼‚æ­¥ç¼–ç¨‹ CombineCombine: Customize handling of asynchronous events by combining event-processing operators.  PublisherPublisher è´Ÿè´£å‘å¸ƒäº‹ä»¶ã€‚ 12345678910111213public protocol Publisher &amp;#123;    &#x2F;&#x2F;">
<meta property="og:type" content="article">
<meta property="og:title" content="å¼‚æ­¥ç¼–ç¨‹ä¸Combine">
<meta property="og:url" content="https://clownote.github.io/2021/01/20/SwiftUI/AsyncProgrammingAndCombine/index.html">
<meta property="og:site_name" content="clownote">
<meta property="og:description" content="å¼‚æ­¥ç¼–ç¨‹ä¸ Combineå¼‚æ­¥ç¼–ç¨‹ CombineCombine: Customize handling of asynchronous events by combining event-processing operators.  PublisherPublisher è´Ÿè´£å‘å¸ƒäº‹ä»¶ã€‚ 12345678910111213public protocol Publisher &amp;#123;    &#x2F;&#x2F;">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://clownote.github.io/2021/01/20/SwiftUI/AsyncProgrammingAndCombine/AsyncProgrammingAndCombine/asynchronous.png">
<meta property="og:image" content="https://clownote.github.io/2021/01/20/SwiftUI/AsyncProgrammingAndCombine/AsyncProgrammingAndCombine/Combine.png">
<meta property="og:image" content="https://clownote.github.io/2021/01/20/SwiftUI/AsyncProgrammingAndCombine/AsyncProgrammingAndCombine/delay.png">
<meta property="og:image" content="https://clownote.github.io/2021/01/20/SwiftUI/AsyncProgrammingAndCombine/AsyncProgrammingAndCombine/debounce.png">
<meta property="article:published_time" content="2021-01-20T12:29:01.909Z">
<meta property="article:modified_time" content="2022-03-03T10:50:02.696Z">
<meta property="article:author" content="CDFMLR">
<meta property="article:tag" content="SwiftUI">
<meta property="article:tag" content="Swift">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://clownote.github.io/2021/01/20/SwiftUI/AsyncProgrammingAndCombine/AsyncProgrammingAndCombine/asynchronous.png">
    
    
        
          
              <link rel="shortcut icon" href="/images/rabbit.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/rabbit_192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/rabbit_180.png">
          
        
    
    <!-- title -->
    <title>å¼‚æ­¥ç¼–ç¨‹ä¸Combine</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
      
<link rel="stylesheet" href="/css/rtl.css">

    
    <!-- rss -->
    
    
    <!--Google search varification (PRIVATE)-->
    <meta name="google-site-verification" content="MrqlpFAD8nDanw3Ypv7ZsIWHLnTdhRuLa4QhSVwxIvc" />
    <!--Google AdSense å…³è” (PRIVATE)-->
    <script data-ad-client="ca-pub-1510963483941114" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<meta name="generator" content="Hexo 5.4.0"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">é¦–é¡µ</a></li>
         
          <li><a href="/about/">å…³äº</a></li>
         
          <li><a href="/archives/">å½’æ¡£</a></li>
         
          <li><a target="_blank" rel="noopener" href="https://github.com/cdfmlr">é¡¹ç›®</a></li>
         
          <li><a href="/search/">æœç´¢</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2021/01/22/SwiftUI/CombinePublisherOperator/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2021/01/16/blog/PyPiGitHubActions/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">ä¸Šä¸€ç¯‡</span>
      <span id="i-next" class="info" style="display:none;">ä¸‹ä¸€ç¯‡</span>
      <span id="i-top" class="info" style="display:none;">è¿”å›é¡¶éƒ¨</span>
      <span id="i-share" class="info" style="display:none;">åˆ†äº«æ–‡ç« </span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://clownote.github.io/2021/01/20/SwiftUI/AsyncProgrammingAndCombine/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://clownote.github.io/2021/01/20/SwiftUI/AsyncProgrammingAndCombine/&text=å¼‚æ­¥ç¼–ç¨‹ä¸Combine"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://clownote.github.io/2021/01/20/SwiftUI/AsyncProgrammingAndCombine/&title=å¼‚æ­¥ç¼–ç¨‹ä¸Combine"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://clownote.github.io/2021/01/20/SwiftUI/AsyncProgrammingAndCombine/&is_video=false&description=å¼‚æ­¥ç¼–ç¨‹ä¸Combine"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=å¼‚æ­¥ç¼–ç¨‹ä¸Combine&body=Check out this article: https://clownote.github.io/2021/01/20/SwiftUI/AsyncProgrammingAndCombine/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://clownote.github.io/2021/01/20/SwiftUI/AsyncProgrammingAndCombine/&title=å¼‚æ­¥ç¼–ç¨‹ä¸Combine"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://clownote.github.io/2021/01/20/SwiftUI/AsyncProgrammingAndCombine/&title=å¼‚æ­¥ç¼–ç¨‹ä¸Combine"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://clownote.github.io/2021/01/20/SwiftUI/AsyncProgrammingAndCombine/&title=å¼‚æ­¥ç¼–ç¨‹ä¸Combine"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://clownote.github.io/2021/01/20/SwiftUI/AsyncProgrammingAndCombine/&title=å¼‚æ­¥ç¼–ç¨‹ä¸Combine"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://clownote.github.io/2021/01/20/SwiftUI/AsyncProgrammingAndCombine/&name=å¼‚æ­¥ç¼–ç¨‹ä¸Combine&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%E4%B8%8E-Combine"><span class="toc-number">1.</span> <span class="toc-text">å¼‚æ­¥ç¼–ç¨‹ä¸ Combine</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B"><span class="toc-number">1.1.</span> <span class="toc-text">å¼‚æ­¥ç¼–ç¨‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Combine"><span class="toc-number">1.2.</span> <span class="toc-text">Combine</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Publisher"><span class="toc-number">1.2.1.</span> <span class="toc-text">Publisher</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Operator"><span class="toc-number">1.2.2.</span> <span class="toc-text">Operator</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#scan"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">scan</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#map"><span class="toc-number">1.2.2.2.</span> <span class="toc-text">map</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Subscriber"><span class="toc-number">1.2.3.</span> <span class="toc-text">Subscriber</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Sink"><span class="toc-number">1.2.3.1.</span> <span class="toc-text">Sink</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Assign"><span class="toc-number">1.2.3.2.</span> <span class="toc-text">Assign</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E8%A7%92%E8%89%B2"><span class="toc-number">1.3.</span> <span class="toc-text">å…¶ä»–è§’è‰²</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Subject"><span class="toc-number">1.3.1.</span> <span class="toc-text">Subject</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#PassthroughSubject"><span class="toc-number">1.3.1.1.</span> <span class="toc-text">PassthroughSubject</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CurrentValueSubject"><span class="toc-number">1.3.1.2.</span> <span class="toc-text">CurrentValueSubject</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Scheduler"><span class="toc-number">1.3.2.</span> <span class="toc-text">Scheduler</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#where"><span class="toc-number">1.3.2.1.</span> <span class="toc-text">where</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#when"><span class="toc-number">1.3.2.2.</span> <span class="toc-text">when</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83"><span class="toc-number">1.4.</span> <span class="toc-text">å‚è€ƒ</span></a></li></ol></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        å¼‚æ­¥ç¼–ç¨‹ä¸Combine
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">clownote</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2021-01-20T12:29:01.909Z" itemprop="datePublished">2021-01-20</time>
        
        (Updated: <time datetime="2022-03-03T10:50:02.696Z" itemprop="dateModified">2022-03-03</time>)
        
      
    </div>


      

      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link-link" href="/tags/Swift/" rel="tag">Swift</a>, <a class="tag-link-link" href="/tags/SwiftUI/" rel="tag">SwiftUI</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h1 id="å¼‚æ­¥ç¼–ç¨‹ä¸-Combine"><a href="#å¼‚æ­¥ç¼–ç¨‹ä¸-Combine" class="headerlink" title="å¼‚æ­¥ç¼–ç¨‹ä¸ Combine"></a>å¼‚æ­¥ç¼–ç¨‹ä¸ Combine</h1><h2 id="å¼‚æ­¥ç¼–ç¨‹"><a href="#å¼‚æ­¥ç¼–ç¨‹" class="headerlink" title="å¼‚æ­¥ç¼–ç¨‹"></a>å¼‚æ­¥ç¼–ç¨‹</h2><p><img src="AsyncProgrammingAndCombine/asynchronous.png" alt="asynchronous"></p>
<h2 id="Combine"><a href="#Combine" class="headerlink" title="Combine"></a>Combine</h2><p><strong><a target="_blank" rel="noopener" href="https://developer.apple.com/documentation/combine">Combine</a></strong>: Customize handling of asynchronous events by combining event-processing operators.</p>
<p><img src="AsyncProgrammingAndCombine/Combine.png" alt="Combine"></p>
<h3 id="Publisher"><a href="#Publisher" class="headerlink" title="Publisher"></a>Publisher</h3><p>Publisher è´Ÿè´£å‘å¸ƒäº‹ä»¶ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">protocol</span> <span class="title">Publisher</span> </span>&#123;</span><br><span class="line">    <span class="comment">/// è¦å‘å¸ƒçš„å€¼ç±»å‹</span></span><br><span class="line">    <span class="keyword">associatedtype</span> <span class="type">Output</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/// å¯èƒ½å‘å¸ƒçš„é”™è¯¯ç±»å‹</span></span><br><span class="line">    <span class="keyword">associatedtype</span> <span class="type">Failure</span> : <span class="type">Error</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/// è¿æ¥è®¢é˜…è€…ï¼Œè¿ä¸Šå subscriber å°±å¯ä»¥ä» Publisher æ¥æ”¶äº†</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">receive</span>&lt;S&gt;<span class="params">(subscriber: S)</span></span> <span class="keyword">where</span> </span><br><span class="line">        <span class="type">S</span> : <span class="type">Subscriber</span>, </span><br><span class="line">        <span class="keyword">Self</span>.<span class="type">Failure</span> <span class="operator">==</span> <span class="type">S</span>.<span class="type">Failure</span>, </span><br><span class="line">        <span class="keyword">Self</span>.<span class="type">Output</span> <span class="operator">==</span> <span class="type">S</span>.<span class="type">Input</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Publisher å¯ä»¥å‘å¸ƒä¸‰ç§äº‹ä»¶:</p>
<ul>
<li>outputï¼šäº‹ä»¶æµä¸­å‘å¸ƒæ–°çš„å€¼ï¼Œç±»å‹ä¸º Outputï¼›</li>
<li>failureï¼šå‘ç”Ÿé”™è¯¯ï¼Œäº‹ä»¶æµç»ˆæ­¢ï¼Œç±»å‹ä¸º Failureï¼› (<code>.failure(e)</code>).</li>
<li>finishedï¼šäº‹ä»¶æµç»“æŸï¼› (<code>.finished</code>)</li>
</ul>
<h3 id="Operator"><a href="#Operator" class="headerlink" title="Operator"></a>Operator</h3><h4 id="scan"><a href="#scan" class="headerlink" title="scan"></a>scan</h4><p> Publisher çš„ <code>scan</code> æ–¹æ³•æä¾›ä¸€ä¸ªæš‚å­˜å€¼ï¼Œæ¯æ¬¡äº‹ä»¶å‘ç”Ÿæ—¶æ‰§è¡Œä¸€ä¸ªé—­åŒ…æ¥æ›´æ–°è¿™ä¸ªæš‚å­˜å€¼ï¼Œå¹¶å‡†å¤‡å¥½åœ¨ä¸‹ä¸€æ¬¡äº‹ä»¶æ—¶ä½¿ç”¨å®ƒã€‚è¿™ä¸ªæš‚å­˜å€¼ä¹Ÿå°†è¢«ä½œä¸ºæ–°çš„ Publisher äº‹ä»¶è¢«å‘é€å‡ºå»ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">scan</span>&lt;T&gt;<span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">_</span> initialResult: T, </span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">_</span> nextPartialResult: <span class="params">(T, <span class="keyword">Self</span>.Output)</span></span></span> -&gt; <span class="type">T</span>) </span><br><span class="line">-&gt; <span class="type">Publishers</span>.<span class="type">Scan</span>&lt;<span class="keyword">Self</span>, <span class="type">T</span>&gt;</span><br></pre></td></tr></table></figure>

<p>e.g.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> foo: <span class="type">AnyPublisher</span>&lt;<span class="type">Void</span>, <span class="type">Never</span>&gt;</span><br><span class="line"><span class="keyword">let</span> fooCounter <span class="operator">=</span> foo.scan(<span class="number">0</span>) &#123; value, <span class="keyword">_</span> <span class="keyword">in</span> value <span class="operator">+</span> <span class="number">1</span> &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>foo</code> å‘å‡º E, E, E, â€¦</li>
<li><code>fooCounter</code> å‘å‡º 1, 2, 3, â€¦</li>
</ul>
<h4 id="map"><a href="#map" class="headerlink" title="map"></a>map</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">map</span>&lt;T&gt;<span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">_</span> transform: <span class="params">(<span class="keyword">Self</span>.Output)</span></span></span> -&gt; <span class="type">T</span>) </span><br><span class="line">-&gt; <span class="type">Publishers</span>.<span class="type">Map</span>&lt;<span class="keyword">Self</span>, <span class="type">T</span>&gt;</span><br></pre></td></tr></table></figure>

<p>map ä¹Ÿæ˜¯è¿”å›ä¸€ä¸ªæ–°çš„ Publisherï¼Œé€šè¿‡ä¸€ä¸ªé—­åŒ…æ¥è½¬åŒ–åŸæ¥çš„ Publisher çš„ç»“æœã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> fooCounterStr <span class="operator">=</span> foo</span><br><span class="line">    .scan(<span class="number">0</span>) &#123; value, <span class="keyword">_</span> <span class="keyword">in</span> value <span class="operator">+</span> <span class="number">1</span> &#125;</span><br><span class="line">    .map&#123; <span class="type">String</span>(<span class="variable">$0</span>) &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>foo</code> å‘å‡º E, E, E, â€¦</li>
<li><code>fooCounterStr</code> å‘å‡º â€œ1â€, â€œ2â€, â€œ3â€, â€¦</li>
</ul>
<p>ç±»ä¼¼çš„è¿˜æœ‰å¾ˆå¤šå•¦ï¼Œå¤§æŠµéƒ½æ˜¯ç”¨è¿™ç§å‡½æ•°å¼çš„å½¢å¼ï¼Œæ¥å¯¹åŸæœ‰çš„ Publisher è¿›è¡Œå˜å½¢ç­‰é€»è¾‘æ“ä½œã€‚è¿™äº›æ“ä½œå°±æ‰®æ¼”äº† Operator çš„è§’è‰²ã€‚</p>
<p>æ¯ä¸ª Operator éƒ½ä½¿ç”¨ä¸Šæ¸¸ Publisher æ‰€å‘å¸ƒçš„æ•°æ®ä½œä¸ºè¾“å…¥ï¼Œ ä»¥æ­¤äº§ç”Ÿçš„æ–°çš„æ•°æ®ï¼Œç„¶åè‡ªèº«æˆä¸ºæ–°çš„ Publisherï¼Œå¹¶å°†æ–°çš„æ•°æ®ä½œä¸ºè¾“å‡ºï¼Œ å‘å¸ƒç»™ä¸‹æ¸¸ã€‚</p>
<p>é€šè¿‡ä¸€ç³»åˆ—ç»„åˆï¼ˆCombineï¼‰ï¼Œå°±å¾—åˆ°äº†ä¸€ä¸ª Publisher çš„é“¾æ¡ã€‚é¦–éƒ¨æ˜¯å‘ç”Ÿçš„äº‹ä»¶ï¼Œä¸­é—´å¯¹äº‹ä»¶è¿›è¡Œå˜å½¢å¤„ç†ï¼Œæœ«å°¾å°±å¾—åˆ°äº†å¯ä»¥ç›´æ¥ä¾›ç»™ Subscriber æ¶ˆè´¹ã€‚</p>
<h3 id="Subscriber"><a href="#Subscriber" class="headerlink" title="Subscriber"></a>Subscriber</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">protocol</span> <span class="title">Subscriber</span> </span>&#123;</span><br><span class="line">    <span class="comment">/// è¦æ¥æ”¶çš„å€¼çš„ç±»å‹</span></span><br><span class="line">    <span class="keyword">associatedtype</span> <span class="type">Input</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/// å¯èƒ½æ¥æ”¶çš„é”™è¯¯ç±»å‹</span></span><br><span class="line">    <span class="keyword">associatedtype</span> <span class="type">Failure</span> : <span class="type">Error</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/// å‘Šè¯‰ subscriber æˆåŠŸè®¢é˜…äº† publisherï¼Œå¯ä»¥æ¥æ”¶äº†</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">receive</span><span class="params">(subscription: Subscription)</span></span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">receive</span><span class="params">(<span class="keyword">_</span> input: <span class="keyword">Self</span>.Input)</span></span> -&gt; <span class="type">Subscribers</span>.<span class="type">Demand</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">receive</span><span class="params">(completion: Subscribers.Completion&lt;<span class="keyword">Self</span>.Failure&gt;)</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Combine é‡Œé¢ä¹Ÿå·²ç»æä¾›äº†ä¸€äº›å¸¸ç”¨çš„ Subscriber äº†ï¼Œä¾‹å¦‚ <code>Sink</code> å’Œ <code>Assign</code>ã€‚</p>
<h4 id="Sink"><a href="#Sink" class="headerlink" title="Sink"></a>Sink</h4><p>Sink æ˜¯ä¸ªé€šè¿‡é—­åŒ…å»å¤„ç†æ¥æ”¶åˆ°çš„å€¼çš„ Subscriberã€‚</p>
<p>è°ƒç”¨ <code>sink</code> æ–¹æ³•ï¼Œå¯ä»¥æŠŠ Sink Subscriber åŠ åˆ° Publisher çš„é“¾æ¡æœ«ç«¯ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">sink</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    receiveCompletion: <span class="params">(<span class="params">(Subscribers.Completion&lt;<span class="keyword">Self</span>.Failure&gt;)</span></span></span></span> -&gt; <span class="type">Void</span>), </span><br><span class="line">    receiveValue: ((<span class="keyword">Self</span>.<span class="type">Output</span>) -&gt; <span class="type">Void</span>)) </span><br><span class="line">-&gt; <span class="type">AnyCancellable</span></span><br></pre></td></tr></table></figure>

<p>é€šè¿‡ç»™ sink çš„é—­åŒ…ï¼Œå°±å¯¹æ‹¿åˆ°çš„äº‹ä»¶å¯ä»¥æ‰§è¡Œä»»æ„æ“ä½œã€‚å¯ä»¥ç”¨ Sink ç»“æŸå“åº”å‡½æ•°å¼çš„ Publisher é“¾ï¼Œæœ€ç»ˆæ¡¥æ¥åˆ°åŸºäºé—­åŒ…çš„æŒ‡ä»¤å¼ä»£ç ã€‚</p>
<p>e.g.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> foo <span class="operator">=</span> (<span class="number">0</span> <span class="operator">...</span> <span class="number">5</span>).publisher.map &#123; <span class="keyword">_</span> <span class="keyword">in</span> &#125;</span><br><span class="line"></span><br><span class="line">foo</span><br><span class="line">    .scan(<span class="number">0</span>) &#123; value, <span class="keyword">_</span> <span class="keyword">in</span> value <span class="operator">+</span> <span class="number">1</span> &#125;</span><br><span class="line">    .map &#123; <span class="type">String</span>(<span class="variable">$0</span>) &#125;</span><br><span class="line">    .sink &#123; <span class="built_in">print</span>(<span class="string">&quot;foo count: <span class="subst">\(<span class="variable">$0</span>)</span>&quot;</span>) &#125;</span><br></pre></td></tr></table></figure>

<h4 id="Assign"><a href="#Assign" class="headerlink" title="Assign"></a>Assign</h4><p>Assignï¼Œå¦‚å…¶åï¼Œå°±æ˜¯ä¸ªä¸“æ³¨äºèµ‹å€¼çš„ Subscriberã€‚<code>assign</code> æ¥å—ä¸€ä¸ªæŸ class çš„å®ä¾‹ä»¥åŠå¯¹è±¡ç±»å‹ä¸Šçš„æŸä¸ªé”®è·¯å¾„ (<code>\.name</code>)ã€‚å½“ output äº‹ä»¶åˆ°æ¥æ—¶ï¼Œå…¶ä¸­åŒ…å«çš„å€¼å°±å°†è¢«è®¾ç½®åˆ°å¯¹åº”çš„å±æ€§ä¸Šå»:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Combine</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bar</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> count: <span class="type">String</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> bar <span class="operator">=</span> <span class="type">Bar</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> foo <span class="operator">=</span> (<span class="number">0</span> <span class="operator">...</span> <span class="number">5</span>).publisher.map &#123; <span class="keyword">_</span> <span class="keyword">in</span> &#125;</span><br><span class="line"></span><br><span class="line">foo</span><br><span class="line">    .scan(<span class="number">0</span>) &#123; value, <span class="keyword">_</span> <span class="keyword">in</span> value <span class="operator">+</span> <span class="number">1</span> &#125;</span><br><span class="line">    .map &#123; <span class="type">String</span>(<span class="variable">$0</span>) &#125;</span><br><span class="line">    .assign(to: \.count, on: bar)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(bar.count)  # output: <span class="number">6</span></span><br></pre></td></tr></table></figure>

<h2 id="å…¶ä»–è§’è‰²"><a href="#å…¶ä»–è§’è‰²" class="headerlink" title="å…¶ä»–è§’è‰²"></a>å…¶ä»–è§’è‰²</h2><h3 id="Subject"><a href="#Subject" class="headerlink" title="Subject"></a>Subject</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">protocol</span> <span class="title">Subject</span> : <span class="title">AnyObject</span>, <span class="title">Publisher</span> </span>&#123;</span><br><span class="line">    <span class="comment">/// Sends a value to the subscriber.</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">send</span><span class="params">(<span class="keyword">_</span> value: <span class="keyword">Self</span>.Output)</span></span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/// Sends a completion signal (`.failure(e)` or `.finished`)</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">send</span><span class="params">(completion: Subscribers.Completion&lt;<span class="keyword">Self</span>.Failure&gt;)</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>Subject</code> æ˜¯ç”¨æ¥ç»™å¤–éƒ¨è°ƒç”¨è€…é€šè¿‡ send æ–¹æ³•æ¥å‘å¸ƒ output å€¼ã€failure æˆ– finished äº‹ä»¶çš„ã€‚</p>
<p>å’Œ Sink åˆšå¥½ç›¸åï¼ŒSubject å¯ä»¥å®Œæˆâ€œæŒ‡ä»¤å¼ -&gt; å“åº”å¼â€ã€‚</p>
<h4 id="PassthroughSubject"><a href="#PassthroughSubject" class="headerlink" title="PassthroughSubject"></a>PassthroughSubject</h4><p><code>PassthroughSubject</code> æ˜¯ Combine ä¸­çš„ä¸€ç§ Subject å…·ä½“å®ç°ã€‚PassthroughSubject å°† send æ¥æ”¶åˆ°çš„äº‹ä»¶è½¬å‘ç»™ä¸‹æ¸¸ã€‚æ¥æ”¶åˆ°æ‰è½¬å‘ï¼Œæ²¡æ¥æ”¶åˆ°å°±é—²ç€ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> mySubject <span class="operator">=</span> <span class="type">PassthroughSubject</span>&lt;<span class="type">Int</span>, <span class="type">Never</span>&gt;()</span><br><span class="line"></span><br><span class="line">mySubject.send(<span class="number">123</span>)  <span class="comment">// æ²¡äººç›‘å¬ï¼Œä¸¢å¤±äº†</span></span><br><span class="line"></span><br><span class="line">mySubject.sink(</span><br><span class="line">    receiveCompletion: &#123; <span class="built_in">print</span>(<span class="string">&quot;complete: <span class="subst">\(<span class="variable">$0</span>)</span>&quot;</span>) &#125;,</span><br><span class="line">    receiveValue: &#123; <span class="built_in">print</span>(<span class="string">&quot;value: <span class="subst">\(<span class="variable">$0</span>)</span>&quot;</span>)&#125;</span><br><span class="line">)  <span class="comment">// å¼€å§‹ç›‘å¬</span></span><br><span class="line"></span><br><span class="line">mySubject.send(<span class="number">666</span>)</span><br><span class="line">mySubject.send(completion: .finished)</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œè¾“å‡ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">value: 666</span><br><span class="line">complete: finished</span><br></pre></td></tr></table></figure>

<h4 id="CurrentValueSubject"><a href="#CurrentValueSubject" class="headerlink" title="CurrentValueSubject"></a>CurrentValueSubject</h4><p><code>CurrentValueSubject</code> ç›¸å½“äºæ˜¯ä¸ªå¸¦äº†ç¼“å†²çš„ PassthroughSubjectã€‚åœ¨è®¢é˜…å‘ç”Ÿçš„ç¬é—´ï¼ŒCurrentValueSubject ä¼šæŠŠå½“å‰ä¿å­˜çš„å€¼å‘é€ç»™è®¢é˜…è€…ï¼Œä¹‹åçš„è¡Œä¸ºå°±å’Œ PassthroughSubject ç›¸åŒäº†ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒå¯ä»¥ç¼“å†²ä¸€ä¸ªå€¼ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> anotherSubject <span class="operator">=</span> <span class="type">CurrentValueSubject</span>&lt;<span class="type">Int</span>, <span class="type">Never</span>&gt;(<span class="number">1024</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// anotherSubject.send(2048)</span></span><br><span class="line"><span class="comment">// anotherSubject.send(4096)</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;å¼€å§‹ç›‘å¬&quot;</span>)</span><br><span class="line">anotherSubject.sink(</span><br><span class="line">    receiveCompletion: &#123; <span class="built_in">print</span>(<span class="string">&quot;complete: <span class="subst">\(<span class="variable">$0</span>)</span>&quot;</span>) &#125;,</span><br><span class="line">    receiveValue: &#123; <span class="built_in">print</span>(<span class="string">&quot;value: <span class="subst">\(<span class="variable">$0</span>)</span>&quot;</span>)&#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">anotherSubject.send(<span class="number">8192</span>)</span><br><span class="line">anotherSubject.send(<span class="number">16384</span>)</span><br><span class="line">anotherSubject.send(completion: .finished)</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">å¼€å§‹ç›‘å¬</span><br><span class="line">value: 1024</span><br><span class="line">value: 8192</span><br><span class="line">value: 16384</span><br><span class="line">complete: finished</span><br></pre></td></tr></table></figure>

<p>æŠŠä¸Šé¢çš„ä¸¤è¡Œæ³¨é‡Šå–æ¶ˆï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="operator">...</span></span><br><span class="line"></span><br><span class="line">anotherSubject.send(<span class="number">2048</span>)</span><br><span class="line">anotherSubject.send(<span class="number">4096</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;å¼€å§‹ç›‘å¬&quot;</span>)</span><br><span class="line"><span class="operator">...</span></span><br></pre></td></tr></table></figure>

<p>åˆ™è¾“å‡ºï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">å¼€å§‹ç›‘å¬</span><br><span class="line">value: <span class="number">4096</span></span><br><span class="line">value: <span class="number">8192</span></span><br><span class="line">value: <span class="number">16384</span></span><br><span class="line">complete: finished</span><br></pre></td></tr></table></figure>

<h3 id="Scheduler"><a href="#Scheduler" class="headerlink" title="Scheduler"></a>Scheduler</h3><ul>
<li><code>Publisher</code>ï¼šå†³å®šå‘å¸ƒä»€ä¹ˆäº‹ä»¶æµ (what)ï¼›</li>
<li><code>Scheduler</code>ï¼šå†³å®šåœ¨ä»€ä¹ˆåœ°æ–¹ (where)ã€ä»€ä¹ˆæ—¶å€™ (when) å‘å¸ƒäº‹ä»¶å’Œæ‰§è¡Œä»£ç ï¼›</li>
</ul>
<h4 id="where"><a href="#where" class="headerlink" title="where"></a>where</h4><p>åœ¨ç½‘ç»œè¯·æ±‚ä¹‹åï¼Œå“åº”æ˜¯åœ¨åå°çº¿ç¨‹çš„ï¼Œç”¨ç”¨è¯·æ±‚çš„ç»“æœæ›´æ–° UIï¼Œå°±éœ€è¦è½¬åˆ°ä¸»çº¿ç¨‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">URLSession</span>.shared</span><br><span class="line">    .dataTaskPublisher(<span class="keyword">for</span>: <span class="type">URL</span>(string: <span class="string">&quot;https://example.com&quot;</span>)<span class="operator">!</span>)</span><br><span class="line">    .compactMap &#123; <span class="type">String</span>(data: <span class="variable">$0</span>.data, encoding: .utf8) &#125;</span><br><span class="line">    .receive(on: <span class="type">RunLoop</span>.main)  <span class="comment">// Scheduler here</span></span><br><span class="line">    .sink(</span><br><span class="line">        receiveCompletion: &#123; <span class="keyword">_</span> <span class="keyword">in</span> &#125;, </span><br><span class="line">        receiveValue: &#123; textView.text <span class="operator">=</span> <span class="variable">$0</span> &#125;</span><br><span class="line">     )</span><br></pre></td></tr></table></figure>

<p><code>RunLoop</code> å°±æ˜¯å®ç°äº† Scheduler åè®®çš„ç±»å‹ã€‚<code>receive(on: RunLoop.main) </code> æŠŠæ¥æ”¶ä»åå°çº¿ç¨‹è½¬åˆ°ä¸»çº¿ç¨‹ï¼Œä»¥æ›´æ–° UIã€‚</p>
<h4 id="when"><a href="#when" class="headerlink" title="when"></a>when</h4><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒPublisher ä¼šå°½é‡åŠæ—¶æŠŠäº‹ä»¶ä¼ é€’ç»™ä¸‹æ¸¸ã€‚ä½†å¯ä»¥ç”¨ Scheduler åŠ å…¥å»¶è¿Ÿã€‚</p>
<ul>
<li><code>delay</code>ï¼šå°†äº‹ä»¶é€ä¸€å»¶åä¸€å®šæ—¶é—´</li>
</ul>
<p><img src="AsyncProgrammingAndCombine/delay.png" alt="delayæ“ä½œçš„æ—¶åºè¡¨ç¤º"></p>
<ul>
<li><code>debounce</code>ï¼šå»¶è¿Ÿæ‰€æœ‰äº‹ä»¶ï¼Œç›´åˆ°åœ¨ä¸€å®šæ—¶é—´é‡Œæ²¡æœ‰æ–°çš„äº‹ä»¶åˆ°æ¥ï¼Œæ‰å‘ç”Ÿæœ€åä¸€æ¬¡äº‹ä»¶çš„å€¼ã€‚</li>
</ul>
<p><img src="AsyncProgrammingAndCombine/debounce.png" alt="debounce æ“ä½œçš„æ—¶åºè¡¨ç¤º"></p>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p>[1] ç‹å·ã€ŠSwiftUIä¸Combineç¼–ç¨‹ã€‹ch5</p>

  </div>
</article>
<!--Disqus-->


<!--Livere-->

    <div class="blog-post-comments">
        <div id="lv-container" data-id="city" data-uid="MTAyMC80NjEzMi8yMjY0Mw==">
            <noscript>ä¸å¯ç”¨ JavaScript æ”¯æŒçš„äººæ˜¯çœ‹ä¸åˆ°å¯çˆ±çš„è¯„è®ºåŒºçš„ã€‚ğŸ˜¥</noscript>
        </div>
    </div>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">é¦–é¡µ</a></li>
         
          <li><a href="/about/">å…³äº</a></li>
         
          <li><a href="/archives/">å½’æ¡£</a></li>
         
          <li><a target="_blank" rel="noopener" href="https://github.com/cdfmlr">é¡¹ç›®</a></li>
         
          <li><a href="/search/">æœç´¢</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%E4%B8%8E-Combine"><span class="toc-number">1.</span> <span class="toc-text">å¼‚æ­¥ç¼–ç¨‹ä¸ Combine</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B"><span class="toc-number">1.1.</span> <span class="toc-text">å¼‚æ­¥ç¼–ç¨‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Combine"><span class="toc-number">1.2.</span> <span class="toc-text">Combine</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Publisher"><span class="toc-number">1.2.1.</span> <span class="toc-text">Publisher</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Operator"><span class="toc-number">1.2.2.</span> <span class="toc-text">Operator</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#scan"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">scan</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#map"><span class="toc-number">1.2.2.2.</span> <span class="toc-text">map</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Subscriber"><span class="toc-number">1.2.3.</span> <span class="toc-text">Subscriber</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Sink"><span class="toc-number">1.2.3.1.</span> <span class="toc-text">Sink</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Assign"><span class="toc-number">1.2.3.2.</span> <span class="toc-text">Assign</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E8%A7%92%E8%89%B2"><span class="toc-number">1.3.</span> <span class="toc-text">å…¶ä»–è§’è‰²</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Subject"><span class="toc-number">1.3.1.</span> <span class="toc-text">Subject</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#PassthroughSubject"><span class="toc-number">1.3.1.1.</span> <span class="toc-text">PassthroughSubject</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CurrentValueSubject"><span class="toc-number">1.3.1.2.</span> <span class="toc-text">CurrentValueSubject</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Scheduler"><span class="toc-number">1.3.2.</span> <span class="toc-text">Scheduler</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#where"><span class="toc-number">1.3.2.1.</span> <span class="toc-text">where</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#when"><span class="toc-number">1.3.2.2.</span> <span class="toc-text">when</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83"><span class="toc-number">1.4.</span> <span class="toc-text">å‚è€ƒ</span></a></li></ol></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://clownote.github.io/2021/01/20/SwiftUI/AsyncProgrammingAndCombine/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://clownote.github.io/2021/01/20/SwiftUI/AsyncProgrammingAndCombine/&text=å¼‚æ­¥ç¼–ç¨‹ä¸Combine"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://clownote.github.io/2021/01/20/SwiftUI/AsyncProgrammingAndCombine/&title=å¼‚æ­¥ç¼–ç¨‹ä¸Combine"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://clownote.github.io/2021/01/20/SwiftUI/AsyncProgrammingAndCombine/&is_video=false&description=å¼‚æ­¥ç¼–ç¨‹ä¸Combine"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=å¼‚æ­¥ç¼–ç¨‹ä¸Combine&body=Check out this article: https://clownote.github.io/2021/01/20/SwiftUI/AsyncProgrammingAndCombine/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://clownote.github.io/2021/01/20/SwiftUI/AsyncProgrammingAndCombine/&title=å¼‚æ­¥ç¼–ç¨‹ä¸Combine"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://clownote.github.io/2021/01/20/SwiftUI/AsyncProgrammingAndCombine/&title=å¼‚æ­¥ç¼–ç¨‹ä¸Combine"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://clownote.github.io/2021/01/20/SwiftUI/AsyncProgrammingAndCombine/&title=å¼‚æ­¥ç¼–ç¨‹ä¸Combine"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://clownote.github.io/2021/01/20/SwiftUI/AsyncProgrammingAndCombine/&title=å¼‚æ­¥ç¼–ç¨‹ä¸Combine"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://clownote.github.io/2021/01/20/SwiftUI/AsyncProgrammingAndCombine/&name=å¼‚æ­¥ç¼–ç¨‹ä¸Combine&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> èœå•</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> ç›®å½•</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> åˆ†äº«</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> è¿”å›é¡¶éƒ¨</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2022 CDFMLR
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">é¦–é¡µ</a></li>
         
          <li><a href="/about/">å…³äº</a></li>
         
          <li><a href="/archives/">å½’æ¡£</a></li>
         
          <li><a target="_blank" rel="noopener" href="https://github.com/cdfmlr">é¡¹ç›®</a></li>
         
          <li><a href="/search/">æœç´¢</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->

<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">


<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.0/dist/katex.min.css">


    <!-- jquery -->

<script src="/lib/jquery/jquery.min.js"></script>


<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>

<!-- clipboard -->

  
<script src="/lib/clipboard/clipboard.min.js"></script>

  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"å¤åˆ¶åˆ°ç²˜è´´æ¿!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight .code pre").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      target: function(trigger) {
        return trigger.nextElementSibling;
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "å¤åˆ¶æˆåŠŸ!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-146911386-1', 'auto');
        ga('send', 'pageview');
    </script>
    
    <!-- New: global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-146911386-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-146911386-1');
    </script>
    

<!-- Baidu Analytics -->

    <script type="text/javascript">
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?9a0d2e6fde93dad496ac79f04f3aba97";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>

<!-- Disqus Comments -->


<!--Livere Comments-->

    <script type="text/javascript">
      (function (d, s) {
        var j, e = d.getElementsByTagName(s)[0];

        if (typeof LivereTower === 'function') { return; }

        j = d.createElement(s);
        j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
        j.async = true;

        e.parentNode.insertBefore(j, e);
      })(document, 'script');
    </script>


</body>
</html>
